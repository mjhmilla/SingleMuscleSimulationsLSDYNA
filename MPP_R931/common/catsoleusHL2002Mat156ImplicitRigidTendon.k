*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT 1.4380893       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.162855507657512   0.000091917085423
   0.185149616453136   0.000097860884374
   0.205239995049290   0.000102181941362
   0.223687173667574   0.000105442609612
   0.240833459837610   0.000107973467366
   0.256906375651640   0.000109982303708
   0.272066832023837   0.000111606305981
   0.286434187083551   0.000112939568699
   0.300100385095274   0.000114048644533
   0.313138451855086   0.000123406823506
   0.325607862925658   0.000172503588810
   0.337558079606803   0.000274007450511
   0.349030960919191   0.000443342193635
   0.360062458983489   0.000704632665854
   0.370683842216405   0.001100162087122
   0.380922598375759   0.001719118045181
   0.390803115018136   0.002841793973960
   0.400347201714125   0.011070612092692
   0.409574497497515   0.035779523434891
   0.418502793566210   0.073798984903258
   0.427148292367614   0.122685395308632
   0.435525818210932   0.180669371584932
   0.443648990432688   0.246418803684865
   0.451530367264011   0.318899743071000
   0.459181566504156   0.397289783695166
   0.466613367631521   0.477922625300695
   0.473835798907191   0.556214839386621
   0.480858212230012   0.631306293625107
   0.487689347906389   0.701779604786896
   0.494337391047338   0.764828584743915
   0.500810020960737   0.812868363970155
   0.507114454640937   0.832202971471256
   0.513257485250772   0.846614334182013
   0.519245516328459   0.860295277951102
   0.525084592323064   0.873597834702296
   0.530780425959494   0.886654911829409
   0.536338422851354   0.899534329032479
   0.541763703713219   0.912291062207194
   0.547061124469332   0.925017167667717
   0.552235294511161   0.937723166554923
   0.557290593319363   0.950405880988823
   0.562231185635170   0.963052065270473
   0.567061035340733   0.975039000655399
   0.571783918186563   0.985203801670368
   0.576403433486227   0.993149717675836
   0.580923014883200   0.998340645805874
   0.585345940281791   0.999682924387804
   0.589675341023012   0.988854063627554
   0.593914210376721   0.970556863795850
   0.598065411413215   0.948544582698846
   0.602131684310341   0.924192669085445
   0.606115653146096   0.898189798972592
   0.610019832221292   0.870939663801397
   0.613846631952233   0.842703166749639
   0.617598364369233   0.813660610735109
   0.621277248253221   0.783942857683863
   0.624885413939499   0.753852426859687
   0.628424907814924   0.723725915223901
   0.631897696532296   0.693575819769363
   0.635305670963514   0.663406453964150
   0.638650649911135   0.633220354222768
   0.641934383596154   0.603019287719260
   0.645158556938316   0.572804611584086
   0.648324792643809   0.542577432229592
   0.651434654113967   0.512338686995327
   0.654489648187420   0.482093601159755
   0.657491227727164   0.451859141636949
   0.660440794063032   0.421639624356634
   0.663339699299245   0.391438642873715
   0.666189248495961   0.361260528592858
   0.668990701733010   0.331110647035910
   0.671745276063424   0.300995856386874
   0.674454147363761   0.270925253820589
   0.677118452087705   0.240911468795704
   0.679739288928968   0.210973093599595
   0.682317720399046   0.181139784423871
   0.684854774325017   0.151464842881405
   0.687351445272174   0.122065737188735
   0.689808695895970   0.093360568990766
   0.692227458227425   0.070425299832855
   0.694608634895877   0.054044308441212
   0.696953100292671   0.041584012728646
   0.699261701679177   0.031809457714884
   0.701535260242263   0.024023553723444
   0.703774572100172   0.017787029150803
   0.705980409261548   0.012801903819763
   0.708153520540183   0.008855026890688
   0.710294632427888   0.005787684557627
   0.712404449927754   0.003477920800777
   0.714483657349913   0.001829619214736
   0.716532919071777   0.000765431080724
   0.718552880264634   0.000222012897527
   0.720544167588334   0.000122687483257
   0.722507389855723   0.000122690606110
   0.724443138668373   0.000122693576590
   0.726351989025042   0.000122696400470
   0.728234499904271   0.000122699083249
   0.730091214822377   0.000122701630174
   0.731922662368077   0.000122704046247
   0.733729356714883   0.000122706336245
   0.735511798112355   0.000122708504726
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.524243631373570   0.000121495705752
   0.526254951663733   0.000121519802246
   0.528248960393680   0.000121543351917
   0.530225888865893   0.000121566371754
   0.532185964015638   0.000121588878091
   0.534129408523175   0.000121610886637
   0.536056440922125   0.000121632412501
   0.537967275704170   0.000121653470226
   0.539862123420257   0.000121674073806
   0.541741190778437   0.000135966163197
   0.543604680738500   0.000211902528842
   0.545452792603530   0.000355217481786
   0.547285722108513   0.000568239634889
   0.549103661506126   0.000853431532257
   0.550906799649807   0.001213400905376
   0.552695322074235   0.001650913161491
   0.554469411073304   0.002168905274178
   0.556229245775711   0.002770501274463
   0.557975002218234   0.003459029574778
   0.559706853416800   0.004238042398911
   0.561424969435430   0.005111337640492
   0.563129517453128   0.006082983532566
   0.564820661828807   0.007157346584040
   0.566498564164326   0.008339123328778
   0.568163383365690   0.009633376544126
   0.569815275702497   0.011045576733746
   0.571454394865700   0.012581649842157
   0.573080892023723   0.014248032385798
   0.574694915877010   0.016051735461123
   0.576296612711057   0.018000419442806
   0.577886126447978   0.020102481639682
   0.579463598696653   0.022367159767378
   0.581029168801518   0.024804654873407
   0.582582973890033   0.027426278381434
   0.584125148918876   0.030244629305274
   0.585655826718912   0.033273809563199
   0.587175138038964   0.036529687911359
   0.588683211588447   0.040030226629804
   0.590180174078876   0.043795890223243
   0.591666150264308   0.047850162802548
   0.593141262980743   0.052220211708926
   0.594605633184512   0.056937751323178
   0.596059379989696   0.062040186224216
   0.597502620704600   0.067572152755522
   0.598935470867307   0.073587643122687
   0.600358044280355   0.080153006050289
   0.601770453044548   0.087351311388508
   0.603172807591941   0.095288922918523
   0.604565216718014   0.104105820894699
   0.605947787613063   0.113992676370407
   0.607320625892841   0.125221015552110
   0.608683835628452   0.138032600094173
   0.610037519375538   0.152186618923518
   0.611381778202774   0.167411976710403
   0.612716711719684   0.183518272005432
   0.614042418103811   0.200365701859952
   0.615358994127247   0.217848022687083
   0.616666535182555   0.235882247324060
   0.617965135308082   0.254402083937899
   0.619254887212702   0.273353578820775
   0.620535882299986   0.292692120634434
   0.621808210691829   0.312380319686708
   0.623071961251535   0.332386468765228
   0.624327221606396   0.352683401734642
   0.625574078169753   0.373247631042773
   0.626812616162573   0.394058685102568
   0.628042919634550   0.415098591694052
   0.629265071484740   0.436351469883293
   0.630479153481739   0.457803203833397
   0.631685246283430   0.479441179274618
   0.632883429456294   0.501254068521267
   0.634073781494308   0.523231653532317
   0.635256379837440   0.545364679096843
   0.636431300889739   0.567644730102725
   0.637598620037052   0.590064128228801
   0.638758411664356   0.612615844430122
   0.639910749172730   0.635293424361604
   0.641055704995972   0.658090924475904
   0.642193350616864   0.681002856985159
   0.643323756583103   0.704024142228354
   0.644446992522899   0.727150067261344
   0.645563127160257   0.750376249703649
   0.646672228329940   0.773698606048458
   0.647774362992130   0.797113323780092
   0.648869597246787   0.820616836754121
   0.649957996347725   0.844205803385088
   0.651039624716393   0.867877087260006
   0.652114545955392   0.891627739855658
   0.653182822861711   0.915454985087064
   0.654244517439709   0.939356205455297
   0.655299690913829   0.963328929596711
   0.656348403741074   0.987370821063983
   0.657390715623225   1.011476110974070
   0.658426685518831   1.035597053318611
   0.659456371654959   1.059719239675599
   0.660479831538713   1.083842643622864
   0.661497121968541   1.107967239385827
   0.662508299045314   1.132093001819141
   0.663513418183196   1.156219906388911
   0.664512534120310   1.180347929155504
   0.665505700929192   1.204477046756898
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -0.648923053628380   0.000122056884766
  -0.641206130828475   0.000122058496094
  -0.633489208028570   0.000122060107422
  -0.625772285228665   0.000122061718750
  -0.618055362428760   0.000122063330078
  -0.610338439628855   0.000122064941406
  -0.602621516828950   0.000122066552734
  -0.594904594029044   0.000122068164063
  -0.587187671229140   0.000122069775391
  -0.579470748429234   0.000339669226664
  -0.571753825629329   0.001201073085136
  -0.564036902829424   0.002437577926703
  -0.556319980029519   0.003914349742284
  -0.548603057229614   0.005562017603801
  -0.540886134429709   0.007339294487011
  -0.533169211629804   0.009219245835846
  -0.525452288829899   0.011183189807857
  -0.517735366029994   0.013216447261137
  -0.510018443230089   0.015293460672677
  -0.502301520430184   0.017398407462537
  -0.494584597630279   0.019523184390602
  -0.486867674830374   0.021662981807344
  -0.479150752030469   0.023814667717520
  -0.471433829230564   0.025976067505535
  -0.463716906430658   0.028151688049616
  -0.455999983630754   0.030375980086870
  -0.448283060830848   0.032656472043331
  -0.440566138030943   0.034995590000858
  -0.432849215231038   0.037395939784991
  -0.425132292431133   0.039860326180182
  -0.417415369631228   0.042391774869639
  -0.409698446831323   0.044993557587439
  -0.401981524031418   0.047669221077111
  -0.394264601231513   0.050422620585421
  -0.386547678431608   0.053257958790868
  -0.378830755631703   0.056179831285224
  -0.371113832831798   0.059193280009011
  -0.363396910031893   0.062303856410141
  -0.355679987231988   0.065517696579743
  -0.347963064432083   0.068841611264052
  -0.340246141632178   0.072283194518837
  -0.332529218832272   0.075850955954589
  -0.324812296032367   0.079554483152116
  -0.317095373232462   0.083404643113608
  -0.309378450432557   0.087413834867761
  -0.301661527632652   0.091596310061854
  -0.293944604832747   0.095968585339999
  -0.286227682032842   0.100549980827791
  -0.278510759232937   0.105363335326740
  -0.270793836433032   0.110435974728282
  -0.263076913633127   0.115801052690139
  -0.255359990833222   0.121499455017003
  -0.247643068033317   0.127582587710276
  -0.239926145233412   0.134116608379023
  -0.232209222433507   0.141186835075739
  -0.224492299633602   0.148815310084035
  -0.216775376833697   0.157006923852986
  -0.209058454033792   0.165790228369628
  -0.201341531233887   0.175196273123041
  -0.193624608433981   0.185258922092035
  -0.185907685634076   0.196015224416460
  -0.178190762834171   0.207505850300874
  -0.170473840034266   0.219775606755594
  -0.162756917234361   0.232874051809538
  -0.155039994434456   0.246856231198541
  -0.147323071634551   0.261783568770483
  -0.139606148834646   0.277724951727556
  -0.131889226034741   0.294758065495058
  -0.124172303234836   0.312971052202536
  -0.116455380434931   0.332464594165591
  -0.108738457635026   0.353354563583002
  -0.101021534835121   0.375775438711946
  -0.093304612035216   0.399884776298134
  -0.085587689235311   0.425869169161057
  -0.077870766435406   0.453952340239887
  -0.070153843635501   0.484406391552138
  -0.062436920835595   0.517567855435566
  -0.054719998035690   0.553861320198086
  -0.047003075235785   0.593835518804720
  -0.039286152435880   0.638221003023111
  -0.031569229635975   0.688027654426320
  -0.023852306836070   0.744721921791790
  -0.016135384036165   0.810581732328924
  -0.008418461236260   0.889511957404754
  -0.000701538436355   0.989367200993411
   0.007015384363550   1.157266308940131
   0.014732307163455   1.197722570284723
   0.022449229963360   1.214947301526917
   0.030166152763265   1.222149189426940
   0.037883075563170   1.225472931172871
   0.045599998363075   1.228695259741327
   0.053316921162980   1.231884632021613
   0.061033843962885   1.235056000000000
   0.068750766762791   1.238224000000000
   0.076467689562696   1.241392000000000
   0.084184612362601   1.244560000000000
   0.091901535162506   1.247728000000000
   0.099618457962411   1.250896000000000
   0.107335380762316   1.254064000000000
   0.115052303562221   1.257232000000000
   0.122769226362126   1.260400000000000
   0.584615363629171   1.439191919879918
$         
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1
                 0.0                 0.0
             &timeS0                 0.0
             &timeS1             &actVal
              &timeE             &actVal
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.035,0.010,0.040,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
