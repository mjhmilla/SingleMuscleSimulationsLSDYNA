*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT      &sno       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.198846663969159   0.000104614252628
   0.218738866728704   0.000107216641176
   0.238204058114191   0.000109290470686
   0.257339154083862   0.000110972862850
   0.276212766876087   0.000112358321481
   0.294875109808046   0.000113513981125
   0.313363931589914   0.000114740510925
   0.331708248762202   0.000137783414779
   0.349930788028866   0.000202436020070
   0.368049637905454   0.000319314599090
   0.386079397213043   0.000503852301073
   0.404031993016216   0.000780391217244
   0.421917275359923   0.001192045706145
   0.439743457656671   0.001831370124800
   0.457517448076863   0.003003298251656
   0.475245102527004   0.011891432723472
   0.492931420275943   0.035854764631698
   0.510580697003746   0.071948188325847
   0.528196645813490   0.118031477139508
   0.545782493840385   0.172534420751894
   0.563341060064731   0.234262773457366
   0.580874818498183   0.302282036649266
   0.598385949880140   0.375843951453810
   0.615876384269470   0.453017277580979
   0.633347836363187   0.528625832501410
   0.650801834961490   0.601632144949375
   0.668239747688487   0.671042143617570
   0.685662801842509   0.735084296134487
   0.703072102069543   0.789898373432151
   0.720468645413989   0.822944829674772
   0.737853334192553   0.837732088347315
   0.755226987052028   0.851179766616023
   0.772590348504639   0.864114887172952
   0.789944097181295   0.876750309395283
   0.807288853000486   0.889180402121436
   0.824625183416277   0.901457173518550
   0.841953608881174   0.913633687774272
   0.859274607637136   0.925787526337064
   0.876588619929607   0.937922943853344
   0.893896051724388   0.950037084677431
   0.911197277994741   0.962119010307336
   0.928492645635826   0.973703015569082
   0.945782476055052   0.983680546290768
   0.963067067479753   0.991699571913310
   0.980346697017691   0.997323993310590
   0.997621622500814   0.999926331633665
   1.014892084138524   0.993765367361540
   1.032158306003073   0.978212685768341
   1.049420497366736   0.958414211679431
   1.066678853907763   0.936061585175742
   1.083933558799951   0.911951034584443
   1.101184783698764   0.886533272483591
   1.118432689635311   0.860093025650356
   1.135677427828113   0.832823906063276
   1.152919140421347   0.804864744576683
   1.170157961157267   0.776325686623126
   1.187394015989548   0.747573426990300
   1.204627423643533   0.718793307756557
   1.221858296128706   0.689992536741808
   1.239086739208055   0.661174526240261
   1.256312852828535   0.632341391067948
   1.273536731516337   0.603494644393710
   1.290758464740275   0.574635465597296
   1.307978137246280   0.545764824809464
   1.325195829365623   0.516883548783532
   1.342411617299274   0.487994500727666
   1.359625573380509   0.459113240486942
   1.376837766317704   0.430244900883971
   1.394048261419018   0.401392474314791
   1.411257120800553   0.372559512446575
   1.428464403579370   0.343750333214161
   1.445670166052644   0.314970330401294
   1.462874461864111   0.286226456773936
   1.480077342158836   0.257528018116679
   1.497278855727259   0.228888065915102
   1.514479049139378   0.200326056482405
   1.531677966869837   0.171873557012709
   1.548875651414644   0.143588808654677
   1.566072143400161   0.115606664837731
   1.583267481684958   0.088607304800632
   1.600461703455069   0.067965306861995
   1.617654844313147   0.052823412060717
   1.634846938361967   0.041120315147567
   1.652038018282697   0.031829987686201
   1.669228115408306   0.024353479320396
   1.686417259792464   0.018305037892165
   1.703605480274262   0.013418931070469
   1.720792804539028   0.009502883656196
   1.737979259175525   0.006412448019260
   1.755164869729774   0.004035839839213
   1.772349660755739   0.002284446754102
   1.789533655863070   0.001086613485888
   1.806716877762127   0.000383418751112
   1.823899348306432   0.000125715252855
   1.841081088532752   0.000122689077819
   1.858262118698941   0.000122691989757
   1.875442458319697   0.000122694765136
   1.892622126200366   0.000122697408881
   1.909801140468919   0.000122699925695
   1.926979518606201   0.000122702320074
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.198846663969159   0.000250401403895
   0.218738866728704   0.000256627606914
   0.238204058114191   0.000261588559603
   0.257339154083862   0.000265612502751
   0.276212766876087   0.000268925658475
   0.294875109808046   0.000271688732387
   0.313363931589914   0.000274018788307
   0.331708248762202   0.000276002929717
   0.349930788028866   0.000277707162742
   0.368049637905454   0.000279182309769
   0.386079397213043   0.000280468056186
   0.404031993016216   0.000281595781033
   0.421917275359923   0.000282590575592
   0.439743457656671   0.000283472707708
   0.457517448076863   0.000284258700451
   0.475245102527004   0.000284962137720
   0.492931420275943   0.000285594273514
   0.510580697003746   0.000286164497995
   0.528196645813490   0.000286680697768
   0.545782493840385   0.000287149537081
   0.563341060064731   0.000287576679259
   0.580874818498183   0.000287966962536
   0.598385949880140   0.000288324540734
   0.615876384269470   0.000288652996638
   0.633347836363187   0.000288955433980
   0.650801834961490   0.000289234552529
   0.668239747688487   0.000289492709763
   0.685662801842509   0.000289731971801
   0.703072102069543   0.000289954155677
   0.720468645413989   0.000290160864617
   0.737853334192553   0.000290353517605
   0.755226987052028   0.000290533374272
   0.772590348504639   0.000290701555949
   0.789944097181295   0.000384817970574
   0.807288853000486   0.000893979743015
   0.824625183416277   0.001884247122996
   0.841953608881174   0.003407054583203
   0.859274607637136   0.005523499894196
   0.876588619929607   0.008307135849233
   0.893896051724388   0.011847886724291
   0.911197277994741   0.016257698114915
   0.928492645635826   0.021678963436106
   0.945782476055052   0.028297608310969
   0.963067067479753   0.036364415135851
   0.980346697017691   0.046232046877546
   0.997621622500814   0.058424583556404
   1.014892084138524   0.073783576897661
   1.032158306003073   0.093828061056897
   1.049420497366736   0.121651865652318
   1.066678853907763   0.157642711112233
   1.083933558799951   0.198587729960103
   1.101184783698764   0.242846647471654
   1.118432689635311   0.289525570680912
   1.135677427828113   0.338073369505857
   1.152919140421347   0.388121691949042
   1.170157961157267   0.439409764653435
   1.187394015989548   0.491744938839108
   1.204627423643533   0.544980052208493
   1.221858296128706   0.598999622309580
   1.239086739208055   0.653711044107694
   1.256312852828535   0.709038681680779
   1.273536731516337   0.764919796512789
   1.290758464740275   0.821301653260443
   1.307978137246280   0.878129696708064
   1.325195829365623   0.935097270330215
   1.342411617299274   0.992073416936432
   1.359625573380509   1.049057630377885
   1.376837766317704   1.106049438657065
   1.394048261419018   1.163048401283796
   1.411257120800553   1.220054106863282
   1.428464403579370   1.277066170893404
   1.445670166052644   1.334084233750986
   1.462874461864111   1.391107958848886
   1.480077342158836   1.448137030947694
   1.497278855727259   1.505171154607565
   1.514479049139378   1.562210052767152
   1.531677966869837   1.619253465437986
   1.548875651414644   1.676301148503807
   1.566072143400161   1.733352872615437
   1.583267481684958   1.790408422172669
   1.600461703455069   1.847467594385537
   1.617654844313147   1.904530198408030
   1.634846938361967   1.961596054538021
   1.652038018282697   2.018664993477745
   1.669228115408306   2.075736855649710
   1.686417259792464   2.132811490563391
   1.703605480274262   2.189888756228517
   1.720792804539028   2.246968518611092
   1.737979259175525   2.304050651128697
   1.755164869729774   2.361135034181915
   1.772349660755739   2.418221554718944
   1.789533655863070   2.475310105830838
   1.806716877762127   2.532400586374918
   1.823899348306432   2.589492900624205
   1.841081088532752   2.646586957940830
   1.858262118698941   2.703682672471626
   1.875442458319697   2.760779962864210
   1.892622126200366   2.817878752002001
   1.909801140468919   2.874978966756782
   1.926979518606201   2.932080537757517
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -1.000000000000000   0.000278396615104
  -0.990000000000000   0.000838781791266
  -0.980000000000000   0.001653055919263
  -0.970000000000000   0.002640267347237
  -0.960000000000000   0.003755076556651
  -0.950000000000000   0.004969054219697
  -0.940000000000000   0.006262981804121
  -0.930000000000000   0.007623146996341
  -0.920000000000000   0.009039359601508
  -0.910000000000000   0.010503801752660
  -0.900000000000000   0.012010905368364
  -0.890000000000000   0.013551713491426
  -0.880000000000000   0.015114974959686
  -0.870000000000000   0.016694425056065
  -0.860000000000000   0.018286262867458
  -0.850000000000000   0.019887976464399
  -0.840000000000000   0.021497803074168
  -0.830000000000000   0.023114449226700
  -0.820000000000000   0.024736932488254
  -0.810000000000000   0.026364485846677
  -0.800000000000000   0.028001036224610
  -0.790000000000000   0.029665883795070
  -0.780000000000000   0.031362097267528
  -0.770000000000000   0.033090676700204
  -0.760000000000000   0.034852676451076
  -0.750000000000000   0.036649209397387
  -0.740000000000000   0.038481451586323
  -0.730000000000000   0.040350647371960
  -0.720000000000000   0.042258115102115
  -0.710000000000000   0.044205253428810
  -0.700000000000000   0.046193548328011
  -0.690000000000000   0.048224580928590
  -0.680000000000000   0.050300036267543
  -0.670000000000000   0.052421713109007
  -0.660000000000000   0.054591534989490
  -0.650000000000000   0.056811562681803
  -0.640000000000000   0.059084008306999
  -0.630000000000000   0.061411251368748
  -0.620000000000000   0.063795857040238
  -0.610000000000000   0.066240597102903
  -0.600000000000000   0.068748474022679
  -0.590000000000000   0.071322748758289
  -0.580000000000000   0.073966973033954
  -0.570000000000000   0.076685026985083
  -0.560000000000000   0.079481163312493
  -0.550000000000000   0.082360059375683
  -0.540000000000000   0.085326879042859
  -0.530000000000000   0.088387346628713
  -0.520000000000000   0.091547835939187
  -0.510000000000000   0.094815478376372
  -0.500000000000000   0.098198295340673
  -0.490000000000000   0.101705361958073
  -0.480000000000000   0.105347011696982
  -0.470000000000000   0.109135095094911
  -0.460000000000000   0.113083311184695
  -0.450000000000000   0.117207638265216
  -0.440000000000000   0.121526903034435
  -0.430000000000000   0.126063546620219
  -0.420000000000000   0.130844677777050
  -0.410000000000000   0.135903556926540
  -0.400000000000000   0.141279206577431
  -0.390000000000000   0.146969373407409
  -0.380000000000000   0.152974352486928
  -0.370000000000000   0.159305927131840
  -0.360000000000000   0.165976634607421
  -0.350000000000000   0.172999835445780
  -0.340000000000000   0.180389791178920
  -0.330000000000000   0.188161751770938
  -0.320000000000000   0.196332054270885
  -0.310000000000000   0.204918234498133
  -0.300000000000000   0.213939153928397
  -0.290000000000000   0.223415144388173
  -0.280000000000000   0.233368173711189
  -0.270000000000000   0.243822036192467
  -0.260000000000000   0.254802572533748
  -0.250000000000000   0.266337925061583
  -0.240000000000000   0.278458835388515
  -0.230000000000000   0.291198993476920
  -0.220000000000000   0.304595449389937
  -0.210000000000000   0.318689102063966
  -0.200000000000000   0.333525283480037
  -0.190000000000000   0.349154462029742
  -0.180000000000000   0.365633096221388
  -0.170000000000000   0.383024679972968
  -0.160000000000000   0.401401034819256
  -0.150000000000000   0.420843924297007
  -0.140000000000000   0.441447094488506
  -0.130000000000000   0.463318886856687
  -0.120000000000000   0.486585632698849
  -0.110000000000000   0.511396135539944
  -0.100000000000000   0.537927700659240
  -0.090000000000000   0.566394419249632
  -0.080000000000000   0.597058832170177
  -0.070000000000000   0.630248828694256
  -0.060000000000000   0.666382974996170
  -0.050000000000000   0.706010063783656
  -0.040000000000000   0.749874063379535
  -0.030000000000000   0.799027801323111
  -0.020000000000000   0.855049283629908
  -0.010000000000000   0.920503414066596
   0.000000000000000   1.000110311234852
   0.010000000000000   1.145670657540952
   0.020000000000000   1.185872652737276
   0.030000000000000   1.205412995804813
   0.040000000000000   1.216145794244158
   0.050000000000000   1.221652480388425
   0.060000000000000   1.224311486018077
   0.070000000000000   1.226757564745203
   0.080000000000000   1.229173316499981
   0.090000000000000   1.231572158021877
   0.100000000000000   1.233959818375489
   0.110000000000000   1.236342476335116
   0.120000000000000   1.238725112675202
   0.130000000000000   1.241107749015288
   0.140000000000000   1.243490385355374
   0.150000000000000   1.245873021695460
   0.160000000000000   1.248255658035546
   0.170000000000000   1.250638294375632
   0.180000000000000   1.253020930715718
   0.190000000000000   1.255403567055803
   0.200000000000000   1.257786203395889
   0.210000000000000   1.260168839735975
   0.220000000000000   1.262551476076061
   0.230000000000000   1.264934112416147
   0.240000000000000   1.267316748756233
   0.250000000000000   1.269699385096319
   0.260000000000000   1.272082021436405
   0.270000000000000   1.274464657776491
   0.280000000000000   1.276847294116577
   0.290000000000000   1.279229930456663
   0.300000000000000   1.281612566796749
   0.310000000000000   1.283995203136834
   0.320000000000000   1.286377839476920
   0.330000000000000   1.288760475817006
   0.340000000000000   1.291143112157092
   0.350000000000000   1.293525748497178
   0.360000000000000   1.295908384837264
   0.370000000000000   1.298291021177350
   0.380000000000000   1.300673657517436
   0.390000000000000   1.303056293857522
   0.400000000000000   1.305438930197608
   0.410000000000000   1.307821566537694
   0.420000000000000   1.310204202877779
   0.430000000000000   1.312586839217865
   0.440000000000000   1.314969475557951
   0.450000000000000   1.317352111898037
   0.460000000000000   1.319734748238123
   0.470000000000000   1.322117384578209
   0.480000000000000   1.324500020918295
   0.490000000000000   1.326882657258381
   0.500000000000000   1.329265293598467
   0.510000000000000   1.331647929938553
   0.520000000000000   1.334030566278639
   0.530000000000000   1.336413202618725
   0.540000000000000   1.338795838958810
   0.550000000000000   1.341178475298896
   0.560000000000000   1.343561111638982
   0.570000000000000   1.345943747979068
   0.580000000000000   1.348326384319154
   0.590000000000000   1.350709020659240
   0.600000000000000   1.353091656999326
   0.610000000000000   1.355474293339412
   0.620000000000000   1.357856929679498
   0.630000000000000   1.360239566019584
   0.640000000000000   1.362622202359670
   0.650000000000000   1.365004838699756
   0.660000000000000   1.367387475039841
   0.670000000000000   1.369770111379927
   0.680000000000000   1.372152747720013
   0.690000000000000   1.374535384060099
   0.700000000000000   1.376918020400185
   0.710000000000000   1.379300656740271
   0.720000000000000   1.381683293080357
   0.730000000000000   1.384065929420443
   0.740000000000000   1.386448565760529
   0.750000000000000   1.388831202100615
   0.760000000000000   1.391213838440700
   0.770000000000000   1.393596474780786
   0.780000000000000   1.395979111120872
   0.790000000000000   1.398361747460958
   0.800000000000000   1.400744383801044
   0.810000000000000   1.403127020141130
   0.820000000000000   1.405509656481216
   0.830000000000000   1.407892292821302
   0.840000000000000   1.410274929161388
   0.850000000000000   1.412657565501474
   0.860000000000000   1.415040201841560
   0.870000000000000   1.417422838181646
   0.880000000000000   1.419805474521731
   0.890000000000000   1.422188110861817
   0.900000000000000   1.424570747201903
   0.910000000000000   1.426953383541989
   0.920000000000000   1.429336019882075
   0.930000000000000   1.431718656222161
   0.940000000000000   1.434101292562247
   0.950000000000000   1.436483928902333
   0.960000000000000   1.438866565242419
   0.970000000000000   1.441249201582505
   0.980000000000000   1.443631837922591
   0.990000000000000   1.446014474262676
   1.000000000000000   1.448397110602762
$
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1  
                 0.0            &stimLow
          &stimTimeA            &stimLow                 
          &stimTimeS           &stimHigh
          &stimTimeE           &stimHigh
          &stimTimeB            &stimLow          
              &timeE            &stimLow
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.040,0.040,0.080,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
