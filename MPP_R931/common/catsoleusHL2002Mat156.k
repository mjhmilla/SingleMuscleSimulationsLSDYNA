*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT      &sno       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.198846662806024   0.000104614252016
   0.218738865449211   0.000107216640549
   0.238204056720839   0.000109290470047
   0.257339152578580   0.000110972862201
   0.276212765260407   0.000112358320823
   0.294875108083202   0.000113513980461
   0.313363929756921   0.000114740510254
   0.331708246821906   0.000137783413973
   0.349930785981978   0.000202436018886
   0.368049635752583   0.000319314597223
   0.386079394954708   0.000503852298126
   0.404031990652868   0.000780391212680
   0.421917272891957   0.001192045699173
   0.439743455084433   0.001831370114088
   0.457517445400657   0.003003298234088
   0.475245099747102   0.011891432653914
   0.492931417392587   0.035854764421969
   0.510580694017152   0.071948187904993
   0.528196642723853   0.118031476449094
   0.545782490647881   0.172534419742670
   0.563341056769520   0.234262772087067
   0.580874815100411   0.302282034881095
   0.598385946379938   0.375843949255346
   0.615876380666958   0.453017274931096
   0.633347832658478   0.528625829409263
   0.650801831154686   0.601632141430184
   0.668239743779681   0.671042139692372
   0.685662797831789   0.735084291834680
   0.703072097956988   0.789898368811714
   0.720468641199675   0.822944824861033
   0.737853329876549   0.837732083447079
   0.755226982634399   0.851179761637126
   0.772590343985444   0.864114882118393
   0.789944092560591   0.876750304266814
   0.807288848278326   0.889180396920258
   0.824625178592709   0.901457168245560
   0.841953603956245   0.913633682430057
   0.859274602610890   0.925787520921757
   0.876588614802084   0.937922938367051
   0.893896046495627   0.950037079120278
   0.911197272664777   0.962119004679511
   0.928492640204695   0.973703009873497
   0.945782470522786   0.983680540536820
   0.963067061846383   0.991699566112456
   0.980346691283244   0.997323987476836
   0.997621616665320   0.999926325784689
   1.014892078202007   0.993765361548603
   1.032158299965559   0.978212680046378
   1.049420491228249   0.958414206073277
   1.066678847668324   0.936061579700336
   1.083933552459583   0.911951029250071
   1.101184777257487   0.886533267297897
   1.118432683093144   0.860093020619321
   1.135677421185074   0.832823901191750
   1.152919133677454   0.804864739868702
   1.170157954312538   0.776325682082081
   1.187394009043997   0.747573422617439
   1.204627416597178   0.718793303552043
   1.221858288981560   0.689992532705761
   1.239086731960133   0.661174522372782
   1.256312845479851   0.632341387369126
   1.273536724066903   0.603494640863624
   1.290758457190104   0.574635462236019
   1.307978129595384   0.545764821617064
   1.325195821614014   0.516883545760070
   1.342411609446962   0.487994497873187
   1.359625565427507   0.459113237801402
   1.376837758264020   0.430244898367293
   1.394048253264663   0.401392471966883
   1.411257112545537   0.372559510267322
   1.428464395223701   0.343750331203426
   1.445670157596332   0.314970328558905
   1.462874453307164   0.286226455099683
   1.480077333501262   0.257528016610293
   1.497278846969066   0.228888064576243
   1.514479040280575   0.200326055310616
   1.531677957910430   0.171873556007351
   1.548875642354640   0.143588807814768
   1.566072134239568   0.115606664161501
   1.583267472423783   0.088607304282331
   1.600461694093318   0.067965306464438
   1.617654834850826   0.052823411751731
   1.634846928799083   0.041120314907037
   1.652038008619255   0.031829987500014
   1.669228105644312   0.024353479177943
   1.686417249927924   0.018305037785092
   1.703605470309181   0.013418930991977
   1.720792794473412   0.009502883600610
   1.737979249009378   0.006412447981751
   1.755164859463101   0.004035839815605
   1.772349650388545   0.002284446740740
   1.789533645395361   0.001086613479532
   1.806716867193905   0.000383418748869
   1.823899337637703   0.000125715252119
   1.841081077763520   0.000122689077101
   1.858262107829210   0.000122691989040
   1.875442447349471   0.000122694764419
   1.892622115129650   0.000122697408163
   1.909801129297716   0.000122699924977
   1.926979507334514   0.000122702319357
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.198846662806024   0.000295788174000
   0.218738865449211   0.000303142914030
   0.238204056720839   0.000309003069449
   0.257339152578580   0.000313756376677
   0.276212765260407   0.000317670061958
   0.294875108083202   0.000320933959770
   0.313363929756921   0.000323686352458
   0.331708246821906   0.000326030131538
   0.349930785981978   0.000328043267143
   0.368049635752583   0.000329785793528
   0.386079394954708   0.000331304589295
   0.404031990652868   0.000332636721127
   0.421917272891957   0.000333811828251
   0.439743455084433   0.000334853852183
   0.457517445400657   0.000335782310897
   0.475245099747102   0.000336613250459
   0.492931417392587   0.000337359964722
   0.510580694017152   0.000338033545872
   0.528196642723853   0.000338643310009
   0.545782490647881   0.000339197129315
   0.563341056769520   0.000339701693628
   0.580874815100411   0.000340162718142
   0.598385946379938   0.000340585109583
   0.615876380666958   0.000340973100138
   0.633347832658478   0.000341330356109
   0.650801831154686   0.000341660066614
   0.668239743779681   0.000341965016440
   0.685662797831789   0.000342247646200
   0.703072097956988   0.000342510102279
   0.720468641199675   0.000342754278496
   0.737853329876549   0.000342981851034
   0.755226982634399   0.000343194307841
   0.772590343985444   0.000343392973495
   0.789944092560591   0.000343579030308
   0.807288848278326   0.000343753536310
   0.824625178592709   0.000378814693381
   0.841953603956245   0.000824579901939
   0.859274602610890   0.001823171070925
   0.876588614802084   0.003432459436467
   0.893896046495627   0.005720955961636
   0.911197272664777   0.008770818988611
   0.928492640204695   0.012682030784004
   0.945782470522786   0.017578375840936
   0.963067061846383   0.023616265413501
   0.980346691283244   0.030998267333548
   0.997621616665320   0.039994828418342
   1.014892078202007   0.050981216525858
   1.032158299965559   0.064505228967674
   1.049420491228249   0.081424145489527
   1.066678847668324   0.103224670795749
   1.083933552459583   0.132947155558783
   1.101184777257487   0.173130488729500
   1.118432683093144   0.220064887439628
   1.135677421185074   0.271354022467476
   1.152919133677454   0.325755526709250
   1.170157954312538   0.382526382866329
   1.187394009043997   0.441180214610194
   1.204627416597178   0.501377777846248
   1.221858288981560   0.562871377380239
   1.239086731960133   0.625473477921226
   1.256312845479851   0.689038041559732
   1.273536724066903   0.753448637473578
   1.290758457190104   0.818610672147493
   1.307978129595384   0.884446026251958
   1.325195821614014   0.950889285548911
   1.342411609446962   1.017885014095520
   1.359625565427507   1.085181420280967
   1.376837758264020   1.152488803067605
   1.394048253264663   1.219805204072246
   1.411257112545537   1.287130109958806
   1.428464395223701   1.354463040791233
   1.445670157596332   1.421803547539182
   1.462874453307164   1.489151209794932
   1.480077333501262   1.556505633681506
   1.497278846969066   1.623866449934089
   1.514479040280575   1.691233312138698
   1.531677957910430   1.758605895113646
   1.548875642354640   1.825983893420887
   1.566072134239568   1.893367019995571
   1.583267472423783   1.960755004883296
   1.600461694093318   2.028147594075623
   1.617654834850826   2.095544548435270
   1.634846928799083   2.162945642703298
   1.652038008619255   2.230350664581235
   1.669228105644312   2.297759413881911
   1.686417249927924   2.365171701743141
   1.703605470309181   2.432587349899150
   1.720792794473412   2.500006190004961
   1.737979249009378   2.567428063009418
   1.755164859463101   2.634852818572992
   1.772349650388545   2.702280314526750
   1.789533645395361   2.769710416369253
   1.806716867193905   2.837142996798405
   1.823899337637703   2.904577935275551
   1.841081077763520   2.972015117619334
   1.858262107829210   3.039454435627049
   1.875442447349471   3.106895786721418
   1.892622115129650   3.174339073620857
   1.909801129297716   3.241784204031533
   1.926979507334514   3.309231090359566
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -1.000000000000000   0.000278396613475
  -0.990000000000000   0.000838781786360
  -0.980000000000000   0.001653055909594
  -0.970000000000000   0.002640267331793
  -0.960000000000000   0.003755076534686
  -0.950000000000000   0.004969054190631
  -0.940000000000000   0.006262981767486
  -0.930000000000000   0.007623146951750
  -0.920000000000000   0.009039359548633
  -0.910000000000000   0.010503801691219
  -0.900000000000000   0.012010905298107
  -0.890000000000000   0.013551713412157
  -0.880000000000000   0.015114974871272
  -0.870000000000000   0.016694424958413
  -0.860000000000000   0.018286262760494
  -0.850000000000000   0.019887976348066
  -0.840000000000000   0.021497802948419
  -0.830000000000000   0.023114449091494
  -0.820000000000000   0.024736932343558
  -0.810000000000000   0.026364485692460
  -0.800000000000000   0.028001036060820
  -0.790000000000000   0.029665883621542
  -0.780000000000000   0.031362097084079
  -0.770000000000000   0.033090676506643
  -0.760000000000000   0.034852676247208
  -0.750000000000000   0.036649209183011
  -0.740000000000000   0.038481451361230
  -0.730000000000000   0.040350647135932
  -0.720000000000000   0.042258114854930
  -0.710000000000000   0.044205253170236
  -0.700000000000000   0.046193548057806
  -0.690000000000000   0.048224580646505
  -0.680000000000000   0.050300035973317
  -0.670000000000000   0.052421712802371
  -0.660000000000000   0.054591534670162
  -0.650000000000000   0.056811562349489
  -0.640000000000000   0.059084007961393
  -0.630000000000000   0.061411251009529
  -0.620000000000000   0.063795856667070
  -0.610000000000000   0.066240596715435
  -0.600000000000000   0.068748473620541
  -0.590000000000000   0.071322748341093
  -0.580000000000000   0.073966972601291
  -0.570000000000000   0.076685026536521
  -0.560000000000000   0.079481162847575
  -0.550000000000000   0.082360058893925
  -0.540000000000000   0.085326878543747
  -0.530000000000000   0.088387346111699
  -0.520000000000000   0.091547835403686
  -0.510000000000000   0.094815477821758
  -0.500000000000000   0.098198294766272
  -0.490000000000000   0.101705361363157
  -0.480000000000000   0.105347011080765
  -0.470000000000000   0.109135094456535
  -0.460000000000000   0.113083310523224
  -0.450000000000000   0.117207637579621
  -0.440000000000000   0.121526902323575
  -0.430000000000000   0.126063545882822
  -0.420000000000000   0.130844677011686
  -0.410000000000000   0.135903556131585
  -0.400000000000000   0.141279205751031
  -0.390000000000000   0.146969372547725
  -0.380000000000000   0.152974351592119
  -0.370000000000000   0.159305926199995
  -0.360000000000000   0.165976633636556
  -0.350000000000000   0.172999834433834
  -0.340000000000000   0.180389790123747
  -0.330000000000000   0.188161750670303
  -0.320000000000000   0.196332053122459
  -0.310000000000000   0.204918233299483
  -0.300000000000000   0.213939152676979
  -0.290000000000000   0.223415143081327
  -0.280000000000000   0.233368172346124
  -0.270000000000000   0.243822034766253
  -0.260000000000000   0.254802571043304
  -0.250000000000000   0.266337923503664
  -0.240000000000000   0.278458833759696
  -0.230000000000000   0.291198991773579
  -0.220000000000000   0.304595447608234
  -0.210000000000000   0.318689100199824
  -0.200000000000000   0.333525281529112
  -0.190000000000000   0.349154459987396
  -0.180000000000000   0.365633094082651
  -0.170000000000000   0.383024677732501
  -0.160000000000000   0.401401032471298
  -0.150000000000000   0.420843921835320
  -0.140000000000000   0.441447091906302
  -0.130000000000000   0.463318884146546
  -0.120000000000000   0.486585629852612
  -0.110000000000000   0.511396132548580
  -0.100000000000000   0.537927697512682
  -0.090000000000000   0.566394415936560
  -0.080000000000000   0.597058828677737
  -0.070000000000000   0.630248825007674
  -0.060000000000000   0.666382971098225
  -0.050000000000000   0.706010059653916
  -0.040000000000000   0.749874058993216
  -0.030000000000000   0.799027796649272
  -0.020000000000000   0.855049278628377
  -0.010000000000000   0.920503408682198
   0.000000000000000   1.000110305384800
   0.010000000000000   1.145670650839458
   0.020000000000000   1.185872645800625
   0.030000000000000   1.205412988753862
   0.040000000000000   1.216145787130426
   0.050000000000000   1.221652473242482
   0.060000000000000   1.224311478856581
   0.070000000000000   1.226757557569399
   0.080000000000000   1.229173309310046
   0.090000000000000   1.231572150817910
   0.100000000000000   1.233959811157556
   0.110000000000000   1.236342469103246
   0.120000000000000   1.238725105429395
   0.130000000000000   1.241107741755544
   0.140000000000000   1.243490378081693
   0.150000000000000   1.245873014407842
   0.160000000000000   1.248255650733991
   0.170000000000000   1.250638287060140
   0.180000000000000   1.253020923386289
   0.190000000000000   1.255403559712437
   0.200000000000000   1.257786196038586
   0.210000000000000   1.260168832364735
   0.220000000000000   1.262551468690884
   0.230000000000000   1.264934105017033
   0.240000000000000   1.267316741343182
   0.250000000000000   1.269699377669331
   0.260000000000000   1.272082013995480
   0.270000000000000   1.274464650321629
   0.280000000000000   1.276847286647778
   0.290000000000000   1.279229922973927
   0.300000000000000   1.281612559300076
   0.310000000000000   1.283995195626224
   0.320000000000000   1.286377831952373
   0.330000000000000   1.288760468278522
   0.340000000000000   1.291143104604671
   0.350000000000000   1.293525740930820
   0.360000000000000   1.295908377256969
   0.370000000000000   1.298291013583118
   0.380000000000000   1.300673649909267
   0.390000000000000   1.303056286235416
   0.400000000000000   1.305438922561565
   0.410000000000000   1.307821558887714
   0.420000000000000   1.310204195213862
   0.430000000000000   1.312586831540011
   0.440000000000000   1.314969467866160
   0.450000000000000   1.317352104192309
   0.460000000000000   1.319734740518458
   0.470000000000000   1.322117376844607
   0.480000000000000   1.324500013170756
   0.490000000000000   1.326882649496905
   0.500000000000000   1.329265285823054
   0.510000000000000   1.331647922149202
   0.520000000000000   1.334030558475352
   0.530000000000000   1.336413194801500
   0.540000000000000   1.338795831127649
   0.550000000000000   1.341178467453798
   0.560000000000000   1.343561103779947
   0.570000000000000   1.345943740106096
   0.580000000000000   1.348326376432245
   0.590000000000000   1.350709012758394
   0.600000000000000   1.353091649084543
   0.610000000000000   1.355474285410691
   0.620000000000000   1.357856921736841
   0.630000000000000   1.360239558062989
   0.640000000000000   1.362622194389138
   0.650000000000000   1.365004830715287
   0.660000000000000   1.367387467041436
   0.670000000000000   1.369770103367585
   0.680000000000000   1.372152739693734
   0.690000000000000   1.374535376019883
   0.700000000000000   1.376918012346032
   0.710000000000000   1.379300648672180
   0.720000000000000   1.381683284998329
   0.730000000000000   1.384065921324478
   0.740000000000000   1.386448557650627
   0.750000000000000   1.388831193976776
   0.760000000000000   1.391213830302925
   0.770000000000000   1.393596466629074
   0.780000000000000   1.395979102955223
   0.790000000000000   1.398361739281372
   0.800000000000000   1.400744375607520
   0.810000000000000   1.403127011933669
   0.820000000000000   1.405509648259818
   0.830000000000000   1.407892284585967
   0.840000000000000   1.410274920912116
   0.850000000000000   1.412657557238265
   0.860000000000000   1.415040193564414
   0.870000000000000   1.417422829890563
   0.880000000000000   1.419805466216712
   0.890000000000000   1.422188102542861
   0.900000000000000   1.424570738869009
   0.910000000000000   1.426953375195158
   0.920000000000000   1.429336011521307
   0.930000000000000   1.431718647847456
   0.940000000000000   1.434101284173605
   0.950000000000000   1.436483920499754
   0.960000000000000   1.438866556825903
   0.970000000000000   1.441249193152052
   0.980000000000000   1.443631829478201
   0.990000000000000   1.446014465804350
   1.000000000000000   1.448397102130498
$
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1  
                 0.0            &stimLow
          &stimTimeA            &stimLow                 
          &stimTimeS           &stimHigh
          &stimTimeE           &stimHigh
          &stimTimeB            &stimLow          
              &timeE            &stimLow
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.040,0.040,0.080,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
