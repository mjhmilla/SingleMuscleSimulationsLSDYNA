*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT      &sno       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.138223610046145   0.000091917085423
   0.161445203774102   0.000097860884374
   0.183487378867957   0.000102181941362
   0.204731432664124   0.000105442609612
   0.225403144991981   0.000107973467366
   0.245647049562063   0.000109982303708
   0.265561000675018   0.000111606305981
   0.285214119803327   0.000112939568699
   0.304656889181183   0.000114048644533
   0.323946063129705   0.000123406823506
   0.343259014097408   0.000172503588810
   0.362418072624821   0.000274007450511
   0.381484797339775   0.000443342193635
   0.400481049240418   0.000704632665854
   0.419427780268543   0.001100162087122
   0.438352852090944   0.001719118045181
   0.457320700496730   0.002841793973960
   0.477398081700162   0.011070612092692
   0.498323108402285   0.035779523434891
   0.519136266702861   0.073798984903258
   0.539777791007963   0.122685395308632
   0.560257862494400   0.180669371584932
   0.580609278502719   0.246418803684865
   0.600935291834980   0.318899743071000
   0.621285160889198   0.397289783695165
   0.641597820371758   0.477922625300694
   0.661784119558171   0.556214839386621
   0.681841505622627   0.631306293625107
   0.701750638682490   0.701779604786896
   0.721466268553601   0.764828584743915
   0.740814664652230   0.812868363970155
   0.759475040931430   0.832202971471256
   0.778007276714743   0.846614334182013
   0.796510792675258   0.860295277951102
   0.814994664196198   0.873597834702296
   0.833462743991799   0.886654911829409
   0.851917290303721   0.899534329032479
   0.870360201775483   0.912291062207194
   0.888794196898462   0.925017167667717
   0.907220031809687   0.937723166554923
   0.925638099243310   0.950405880988823
   0.944048518024132   0.963052065270473
   0.962437050054550   0.975039000655400
   0.980776732327565   0.985203801670368
   0.999058579309947   0.993149717675836
   1.017270305557794   0.998340645805874
   1.035386499676067   0.999682924387804
   1.053211844233255   0.988854063627554
   1.070857111463007   0.970556863795850
   1.088410741068020   0.948544582698847
   1.105905275855065   0.924192669085445
   1.123357104247825   0.898189798972592
   1.140775903930982   0.870939663801396
   1.158167984687948   0.842703166749638
   1.175537750854128   0.813660610735109
   1.192888434470349   0.783942857683863
   1.210227292130691   0.753852426859686
   1.227562372434176   0.723725915223901
   1.244894099077286   0.693575819769363
   1.262222560884817   0.663406453964150
   1.279545333478717   0.633220354222768
   1.296861309127958   0.603019287719260
   1.314170232868920   0.572804611584086
   1.331471771815321   0.542577432229592
   1.348765500176460   0.512338686995327
   1.366050985385732   0.482093601159755
   1.383327945615275   0.451859141636949
   1.400595610794324   0.421639624356634
   1.417852944429647   0.391438642873715
   1.435098580592640   0.361260528592858
   1.452330674521375   0.331110647035910
   1.469546650848177   0.300995856386874
   1.486742748229778   0.270925253820589
   1.503913114176559   0.240911468795704
   1.521047749058980   0.210973093599594
   1.538127150765610   0.181139784423871
   1.555126410032330   0.151464842881405
   1.572025066943114   0.122065737188735
   1.588803710446105   0.093360568990766
   1.605676790251044   0.070425299832855
   1.622748185776526   0.054044308441212
   1.639937764904074   0.041584012728646
   1.657207967016774   0.031809457714884
   1.674537604926401   0.024023553723444
   1.691913339185481   0.017787029150803
   1.709326130499195   0.012801903819763
   1.726769520665790   0.008855026890688
   1.744238707016487   0.005787684557627
   1.761730003385744   0.003477920800777
   1.779240505058606   0.001829619214736
   1.796767861126482   0.000765431080724
   1.814310005536693   0.000222012897527
   1.832009132126250   0.000122687483257
   1.849997223142188   0.000122690606110
   1.867984547047522   0.000122693576590
   1.885971125791052   0.000122696400470
   1.903956980491287   0.000122699083249
   1.921942131475380   0.000122701630174
   1.939926598315889   0.000122704046247
   1.957910399865501   0.000122706336245
   1.975893554289859   0.000122708504726
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.788158566403044   0.000157604227929
   0.794498308264316   0.000157634914657
   0.800836867752309   0.000157664909767
   0.807174272741313   0.000157694234614
   0.813510550231428   0.000157722909734
   0.819845726382747   0.000157750954881
   0.826179826547945   0.000157778389062
   0.832512875303353   0.000157805230571
   0.838844896478603   0.000157831497023
   0.845216706891464   0.000176370213802
   0.851692694828846   0.000274871268672
   0.858197776840376   0.000460772319977
   0.864711875301386   0.000737093277287
   0.871230302069055   0.001107027786651
   0.877751552837100   0.001573957829231
   0.884275051723898   0.002141469918268
   0.890800570056041   0.002813373114852
   0.897328034043886   0.003593719119760
   0.903857449187919   0.004486824742634
   0.910388866740137   0.005497297102813
   0.916922367514196   0.006630061980165
   0.923458053652600   0.007890395812108
   0.929996044380586   0.009283961928002
   0.936536473924023   0.010816851728791
   0.943079490700532   0.012495631663816
   0.949625257329654   0.014327397035752
   0.956173951227210   0.016319833888492
   0.962725765667087   0.018481290514699
   0.969280911262683   0.020820860477441
   0.975839617865008   0.023348479497543
   0.982402136907906   0.026075039147910
   0.988968744260163   0.029012521063080
   0.995539743674364   0.032174156379777
   1.002115470956949   0.035574616461523
   1.008696299026974   0.039230242755202
   1.015282644087472   0.043159326066055
   1.021874973209345   0.047382448894637
   1.028473813732986   0.051922909167731
   1.035079765041481   0.056807250347405
   1.041693513473274   0.062065932505711
   1.048315851456890   0.067734193085146
   1.054947702423100   0.073853167311637
   1.061590153777730   0.080471370940917
   1.068244501369370   0.087646699764999
   1.074912310763441   0.095449184698135
   1.081595503804860   0.103964883815710
   1.088296484530132   0.113301543522683
   1.095018328785133   0.123597123896962
   1.101765082022014   0.135033187682236
   1.108542251885234   0.147857046780070
   1.115357678448969   0.162420887358154
   1.122216082869276   0.179038287626548
   1.129101323698386   0.197396893600856
   1.136000596207430   0.217145071843866
   1.142910096407483   0.238035855863656
   1.149827771733972   0.259887909835465
   1.156752183336144   0.282563427371038
   1.163682271961341   0.305954767714126
   1.170617228642056   0.329975945427212
   1.177556417699275   0.354556978713151
   1.184499328132657   0.379640003654344
   1.191445541465460   0.405176523444971
   1.198394709650719   0.431125411954022
   1.205346539405426   0.457451433222788
   1.212300780804769   0.484124122732074
   1.219257218788620   0.511116927926224
   1.226215666712463   0.538406538138235
   1.233175961366977   0.565972355271286
   1.240137959074053   0.593796070701683
   1.247101532585905   0.621861323456420
   1.254066568592821   0.650153421360415
   1.261033060736827   0.678659111529924
   1.268003051363279   0.707366389940682
   1.274977214569313   0.736264342234272
   1.281955320956200   0.765343009718526
   1.288937160823828   0.794593275853064
   1.295922541899707   0.824006769517161
   1.302911287393287   0.853575782123063
   1.309903234320412   0.883293196226597
   1.316898232053455   0.913152423743565
   1.323896141061074   0.943147352237516
   1.330896831808154   0.973272298026041
   1.337900183791741   1.003521965076273
   1.344906084692985   1.033891408839027
   1.351914429628485   1.064376004314895
   1.358925120487163   1.094971417762079
   1.365938065341039   1.125673581550670
   1.372953177920077   1.156478671745760
   1.379970377142816   1.187383088065741
   1.386989586695697   1.218383435915108
   1.394010734655071   1.249476510235016
   1.401033753146713   1.280659280951612
   1.408058469607817   1.311924265980057
   1.415083431876051   1.343209537276517
   1.422108203922574   1.374496407008407
   1.429132788050851   1.405784841355163
   1.436157186527712   1.437074807322097
   1.443181401584068   1.468366272717056
   1.450205435415611   1.499659206127836
   1.457229290183493   1.530953576900329
   1.464252968015001   1.562249355117361
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -1.100000000000000   0.000122058105469
  -1.078000000000000   0.000122060791016
  -1.056000000000000   0.000122063476563
  -1.034000000000000   0.000122066162109
  -1.012000000000000   0.000122068847656
  -0.990000000000000   0.000396295251607
  -0.968000000000000   0.002112180399370
  -0.946000000000000   0.004595317347952
  -0.924000000000000   0.007506284413780
  -0.902000000000000   0.010700139890683
  -0.880000000000000   0.014093445799037
  -0.858000000000000   0.017590838541393
  -0.836000000000000   0.021143051952854
  -0.814000000000000   0.024730541361328
  -0.792000000000000   0.028351634722962
  -0.770000000000000   0.032098337169462
  -0.748000000000000   0.036006284094080
  -0.726000000000000   0.040087639393475
  -0.704000000000000   0.044356177874410
  -0.682000000000000   0.048827600758169
  -0.660000000000000   0.053519935379384
  -0.638000000000000   0.058454048285515
  -0.616000000000000   0.063654313729860
  -0.594000000000000   0.069149499267872
  -0.572000000000000   0.074973961405726
  -0.550000000000000   0.081169295294819
  -0.528000000000000   0.087786668877664
  -0.506000000000000   0.094890224306719
  -0.484000000000000   0.102562211596075
  -0.462000000000000   0.110911072754440
  -0.440000000000000   0.120084858716334
  -0.418000000000000   0.130295035485371
  -0.396000000000000   0.141857769828020
  -0.374000000000000   0.154967870057703
  -0.352000000000000   0.169702720728227
  -0.330000000000000   0.186207520662645
  -0.308000000000000   0.204650476915137
  -0.286000000000000   0.225228257552242
  -0.264000000000000   0.248173227768469
  -0.242000000000000   0.273763238641358
  -0.220000000000000   0.302335163800238
  -0.198000000000000   0.334304103060830
  -0.176000000000000   0.370191454228016
  -0.154000000000000   0.410667439845578
  -0.132000000000000   0.456618382897579
  -0.110000000000000   0.509259004794259
  -0.088000000000000   0.570333166476467
  -0.066000000000000   0.642506816512914
  -0.044000000000000   0.730241413257785
  -0.022000000000000   0.842150343552352
   0.000000000000000   1.000000000000000
   0.022000000000000   1.191047147412257
   0.044000000000000   1.218913123543933
   0.066000000000000   1.225767993619053
   0.088000000000000   1.231113510738884
   0.110000000000000   1.236400000000000
   0.132000000000000   1.241680000000000
   0.154000000000000   1.246960000000000
   0.176000000000000   1.252240000000000
   0.198000000000000   1.257520000000000
   0.220000000000000   1.262800000000000
   0.242000000000000   1.268080000000000
   0.264000000000000   1.273360000000000
   0.286000000000000   1.278640000000000
   0.308000000000000   1.283920000000000
   0.330000000000000   1.289200000000000
   0.352000000000000   1.294480000000000
   0.374000000000000   1.299760000000000
   0.396000000000000   1.305040000000000
   0.418000000000000   1.310320000000000
   0.440000000000000   1.315600000000000
   0.462000000000000   1.320880000000000
   0.484000000000000   1.326160000000000
   0.506000000000000   1.331440000000000
   0.528000000000000   1.336720000000000
   0.550000000000000   1.342000000000001
   0.572000000000000   1.347280000000000
   0.594000000000000   1.352560000000000
   0.616000000000000   1.357840000000001
   0.638000000000000   1.363120000000001
   0.660000000000000   1.368400000000001
   0.682000000000000   1.373680000000000
   0.704000000000000   1.378960000000001
   0.726000000000000   1.384240000000001
   0.748000000000000   1.389520000000001
   0.770000000000000   1.394800000000001
   0.792000000000000   1.400080000000001
   0.814000000000000   1.405360000000001
   0.836000000000000   1.410640000000001
   0.858000000000000   1.415920000000001
   0.880000000000000   1.421200000000001
   0.902000000000000   1.426480000000001
   0.924000000000000   1.431760000000001
   0.946000000000000   1.437040000000001
   0.968000000000000   1.442320000000001
   0.990000000000000   1.447600000000001
   1.012000000000000   1.452880000000001
   1.034000000000000   1.458160000000001
   1.056000000000000   1.463440000000001
   1.078000000000000   1.468720000000001
   1.100000000000000   1.474000000000001
$         
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1  
                 0.0            &stimLow
          &stimTimeA            &stimLow                 
          &stimTimeS           &stimHigh
          &stimTimeE           &stimHigh
          &stimTimeB            &stimLow          
              &timeE            &stimLow
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.040,0.040,0.080,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
