*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT       1.0       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.183505154639175   0.000122028783425
   0.201319587628866   0.000122030958038
   0.219134020618557   0.000122033132651
   0.236948453608247   0.000122035307265
   0.254762886597938   0.000122037481878
   0.272577319587629   0.000122039656492
   0.290391752577320   0.000122041831105
   0.308206185567010   0.000122044005718
   0.326020618556701   0.000122046180332
   0.343835051546392   0.000130991139702
   0.361649484536082   0.000181854224502
   0.379463917525773   0.000287178519851
   0.397278350515464   0.000462327940260
   0.415092783505155   0.000731623245707
   0.432907216494845   0.001137984957954
   0.450721649484536   0.001772319949432
   0.468536082474227   0.002921158237978
   0.486350515463917   0.011350209466081
   0.504164948453608   0.036598155319572
   0.521979381443299   0.075330838731177
   0.539793814432990   0.124998298880713
   0.557608247422680   0.183765379148657
   0.575422680412371   0.250259169124721
   0.593237113402062   0.323420765319485
   0.611051546391753   0.402413072364868
   0.628865979381443   0.483526674354894
   0.646680412371134   0.562141308358061
   0.664494845360825   0.637412360809493
   0.682309278350515   0.707932630531928
   0.700123711340206   0.770896496675080
   0.717938144329897   0.818690767687906
   0.735752577319588   0.837569668272357
   0.753567010309278   0.851512994076646
   0.771381443298969   0.864743107885221
   0.789195876288660   0.877613178086206
   0.807010309278350   0.890255620502107
   0.824824742268041   0.902737356463823
   0.842639175257732   0.915112403293041
   0.860453608247423   0.927471966869546
   0.878268041237113   0.939825486348214
   0.896082474226804   0.952168764982331
   0.913896907216495   0.964487622093997
   0.931711340206186   0.976157806085197
   0.949525773195876   0.986015332633532
   0.967340206185567   0.993664168685065
   0.985154639175258   0.998569238165023
   1.002969072164948   0.999638378185350
   1.020783505154639   0.988553758219916
   1.038597938144330   0.970023625587706
   1.056412371134021   0.947802208618836
   1.074226804123711   0.923264578198196
   1.092041237113402   0.897098589166787
   1.109855670103093   0.869706942208411
   1.127670103092783   0.841349492720125
   1.145484536082474   0.812205492272996
   1.163298969072165   0.782404775107630
   1.181113402061856   0.752248436724183
   1.198927835051546   0.722071437679488
   1.216742268041237   0.691885289299077
   1.234556701030928   0.661693405422172
   1.252371134020619   0.631497491517866
   1.270185567010309   0.601298545284272
   1.288000000000000   0.571097210195077
   1.305814432989691   0.540893929968157
   1.323628865979381   0.510689025908023
   1.341443298969072   0.480487135361877
   1.359257731958763   0.450304634010555
   1.377072164948454   0.420145320656584
   1.394886597938144   0.390012306469790
   1.412701030927835   0.359909467602404
   1.430515463917526   0.329841737681307
   1.448329896907216   0.299815562023647
   1.466144329896907   0.269839638477485
   1.483958762886598   0.239926202847959
   1.501773195876289   0.210093446453250
   1.519587628865979   0.180370592017767
   1.537402061855670   0.150810415752689
   1.555216494845361   0.121529581467918
   1.573030927835052   0.092944030160692
   1.590845360824742   0.070106375453868
   1.608659793814433   0.053796068961932
   1.626474226804124   0.041390404135847
   1.644288659793814   0.031659431869150
   1.662103092783505   0.023908841413250
   1.679917525773196   0.017701087004922
   1.697731958762887   0.012739344969834
   1.715546391752577   0.008811283733799
   1.733360824742268   0.005758795198297
   1.751175257731959   0.003460386697752
   1.768989690721649   0.001820306340620
   1.786804123711340   0.000761498965847
   1.804618556701031   0.000220862250266
   1.822432989690722   0.000122046180332
   1.840247422680412   0.000122044005718
   1.858061855670103   0.000122041831105
   1.875876288659794   0.000122039656492
   1.893690721649484   0.000122037481878
   1.911505154639175   0.000122035307265
   1.929319587628866   0.000122033132651
   1.947134020618557   0.000122030958038
   1.964948453608247   0.000122028783425
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.620616320376757   0.000121495705752
   0.626956946498881   0.000121519802246
   0.633296369202232   0.000121543351917
   0.639634617025610   0.000121566371754
   0.645971717607458   0.000121588878091
   0.652307697721288   0.000121610886637
   0.658642583309430   0.000121632412501
   0.664976399515204   0.000121653470226
   0.671309170713614   0.000121674073806
   0.677640920540615   0.000135966163197
   0.683971671921056   0.000211902528842
   0.690301447095356   0.000355217481786
   0.696630267644982   0.000568239634889
   0.702958154516790   0.000853431532257
   0.709285128046295   0.001213400905376
   0.715611207979912   0.001650913161491
   0.721936413496238   0.002168905274178
   0.728260763226408   0.002770501274463
   0.734584275273577   0.003459029574778
   0.740906967231575   0.004238042398911
   0.747228856202773   0.005111337640492
   0.753549958815200   0.006082983532566
   0.759870291238941   0.007157346584040
   0.766189869201863   0.008339123328778
   0.772508708004692   0.009633376544126
   0.778826822535476   0.011045576733746
   0.785144227283459   0.012581649842157
   0.791460936352401   0.014248032385798
   0.797776963473361   0.016051735461123
   0.804092322016978   0.018000419442806
   0.810407025005264   0.020102481639682
   0.816721085122936   0.022367159767378
   0.823034514728306   0.024804654873407
   0.829347325863755   0.027426278381434
   0.835659530265798   0.030244629305274
   0.841971139374771   0.033273809563199
   0.848282164344149   0.036529687911359
   0.854592616049511   0.040030226629804
   0.860902505097170   0.043795890223243
   0.867211841832491   0.047850162802548
   0.873520636347884   0.052220211708926
   0.879828898490526   0.056937751323178
   0.886136637869778   0.062040186224216
   0.892443863864352   0.067572152755522
   0.898750585629211   0.073587643122687
   0.905056812102222   0.080153006050289
   0.911362552010576   0.087351311388508
   0.917667813876973   0.095288922918523
   0.923972606025604   0.104105820894699
   0.930276936587906   0.113992676370407
   0.936580813508131   0.125221015552110
   0.942884244548718   0.138032600094173
   0.949187237295477   0.152186618923518
   0.955489799162599   0.167411976710403
   0.961791937397502   0.183518272005432
   0.968093659085500   0.200365701859952
   0.974394971154327   0.217848022687083
   0.980695880378506   0.235882247324060
   0.986996393383570   0.254402083937899
   0.993296516650150   0.273353578820775
   0.999596256517925   0.292692120634434
   1.005895619189441   0.312380319686708
   1.012194610733813   0.332386468765228
   1.018493237090298   0.352683401734642
   1.024791504071765   0.373247631042773
   1.031089417368042   0.394058685102568
   1.037386982549168   0.415098591694052
   1.043684205068531   0.436351469883293
   1.049981090265919   0.457803203833397
   1.056277643370466   0.479441179274618
   1.062573869503515   0.501254068521267
   1.068869773681381   0.523231653532317
   1.075165360818043   0.545364679096843
   1.081460635727745   0.567644730102725
   1.087755603127515   0.590064128228801
   1.094050267639618   0.612615844430122
   1.100344633793927   0.635293424361604
   1.106638706030225   0.658090924475904
   1.112932488700438   0.681002856985159
   1.119225986070804   0.704024142228354
   1.125519202323976   0.727150067261344
   1.131812141561063   0.750376249703649
   1.138104807803612   0.773698606048458
   1.144397204995531   0.797113323780092
   1.150689337004962   0.820616836754121
   1.156981207626090   0.844205803385088
   1.163272820580908   0.867877087260006
   1.169564179520932   0.891627739855658
   1.175855288028862   0.915454985087064
   1.182146149620196   0.939356205455297
   1.188436767744811   0.963328929596711
   1.194727145788479   0.987370821063983
   1.201017287074357   1.011476110974070
   1.207307194864435   1.035597053318611
   1.213596872360930   1.059719239675599
   1.219886322707660   1.083842643622864
   1.226175548991369   1.107967239385827
   1.232464554243015   1.132093001819141
   1.238753341439034   1.156219906388911
   1.245041913502557   1.180347929155504
   1.251330273304603   1.204477046756898
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -1.110000000000000   0.000122056884766
  -1.096800000000000   0.000122058496094
  -1.083600000000000   0.000122060107422
  -1.070400000000000   0.000122061718750
  -1.057200000000000   0.000122063330078
  -1.044000000000000   0.000122064941406
  -1.030800000000000   0.000122066552734
  -1.017600000000000   0.000122068164063
  -1.004400000000000   0.000122069775391
  -0.991200000000000   0.000339669226664
  -0.978000000000000   0.001201073085136
  -0.964800000000000   0.002437577926703
  -0.951600000000000   0.003914349742284
  -0.938400000000000   0.005562017603801
  -0.925200000000000   0.007339294487011
  -0.912000000000000   0.009219245835846
  -0.898800000000000   0.011183189807857
  -0.885600000000000   0.013216447261137
  -0.872400000000000   0.015293460672677
  -0.859200000000000   0.017398407462537
  -0.846000000000000   0.019523184390602
  -0.832800000000000   0.021662981807344
  -0.819600000000000   0.023814667717520
  -0.806400000000000   0.025976067505535
  -0.793200000000000   0.028151688049616
  -0.780000000000000   0.030375980086870
  -0.766800000000000   0.032656472043331
  -0.753600000000000   0.034995590000858
  -0.740400000000000   0.037395939784991
  -0.727200000000000   0.039860326180182
  -0.714000000000000   0.042391774869639
  -0.700800000000000   0.044993557587439
  -0.687600000000000   0.047669221077111
  -0.674400000000000   0.050422620585421
  -0.661200000000000   0.053257958790868
  -0.648000000000000   0.056179831285224
  -0.634800000000000   0.059193280009011
  -0.621600000000000   0.062303856410141
  -0.608400000000000   0.065517696579743
  -0.595200000000000   0.068841611264052
  -0.582000000000000   0.072283194518837
  -0.568800000000000   0.075850955954589
  -0.555600000000000   0.079554483152116
  -0.542400000000000   0.083404643113608
  -0.529200000000000   0.087413834867761
  -0.516000000000000   0.091596310061854
  -0.502800000000000   0.095968585339999
  -0.489600000000000   0.100549980827791
  -0.476400000000000   0.105363335326740
  -0.463200000000000   0.110435974728282
  -0.450000000000000   0.115801052690139
  -0.436800000000000   0.121499455017003
  -0.423600000000000   0.127582587710276
  -0.410400000000000   0.134116608379023
  -0.397200000000000   0.141186835075739
  -0.384000000000000   0.148815310084035
  -0.370800000000000   0.157006923852986
  -0.357600000000000   0.165790228369628
  -0.344400000000000   0.175196273123041
  -0.331200000000000   0.185258922092035
  -0.318000000000000   0.196015224416460
  -0.304800000000000   0.207505850300874
  -0.291600000000000   0.219775606755594
  -0.278400000000000   0.232874051809538
  -0.265200000000000   0.246856231198541
  -0.252000000000000   0.261783568770483
  -0.238800000000000   0.277724951727556
  -0.225600000000000   0.294758065495058
  -0.212400000000000   0.312971052202536
  -0.199200000000000   0.332464594165591
  -0.186000000000000   0.353354563583002
  -0.172800000000000   0.375775438711946
  -0.159600000000000   0.399884776298134
  -0.146400000000000   0.425869169161057
  -0.133200000000000   0.453952340239887
  -0.120000000000000   0.484406391552138
  -0.106800000000000   0.517567855435566
  -0.093600000000000   0.553861320198086
  -0.080400000000000   0.593835518804720
  -0.067200000000000   0.638221003023111
  -0.054000000000000   0.688027654426320
  -0.040800000000000   0.744721921791790
  -0.027600000000000   0.810581732328924
  -0.014400000000000   0.889511957404754
  -0.001200000000000   0.989367200993411
   0.012000000000000   1.157266308940131
   0.025200000000000   1.197722570284723
   0.038400000000000   1.214947301526917
   0.051600000000000   1.222149189426940
   0.064800000000000   1.225472931172871
   0.078000000000000   1.228695259741327
   0.091200000000000   1.231884632021613
   0.104400000000000   1.235056000000000
   0.117600000000000   1.238224000000000
   0.130800000000000   1.241392000000000
   0.144000000000000   1.244560000000000
   0.157200000000000   1.247728000000000
   0.170400000000000   1.250896000000000
   0.183600000000000   1.254064000000000
   0.196800000000000   1.257232000000000
   0.210000000000000   1.260400000000000
   1.000000000000000   1.450000000000001
$         
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1
                 0.0                 0.0
             &timeS0                 0.0
             &timeS1             &actVal
              &timeE             &actVal
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.035,0.010,0.040,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
