*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT       1.0       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.138223610046145   0.000091917085423
   0.161445203774102   0.000097860884374
   0.183487378867957   0.000102181941362
   0.204731432664124   0.000105442609612
   0.225403144991981   0.000107973467366
   0.245647049562063   0.000109982303708
   0.265561000675018   0.000111606305981
   0.285214119803327   0.000112939568699
   0.304656889181183   0.000114048644533
   0.323927187884291   0.000123406823506
   0.343054081611622   0.000172503588810
   0.362060298437789   0.000274007450511
   0.380963900434186   0.000443342193635
   0.399779444316358   0.000704632665854
   0.418518806861128   0.001100162087122
   0.437191784266046   0.001719118045181
   0.455806535382825   0.002841793973960
   0.474369914834783   0.011070612092692
   0.492887727010649   0.035779523434891
   0.511364922251995   0.073798984903258
   0.529805750173168   0.122685395308632
   0.548213880760070   0.180669371584932
   0.566592500951238   0.246418803684865
   0.584944392352847   0.318899743071000
   0.603271994286660   0.397289783695165
   0.621577455327062   0.477922625300694
   0.639862675724899   0.556214839386621
   0.658129342557743   0.631306293625107
   0.676378959030992   0.701779604786896
   0.694612869042108   0.764828584743915
   0.712832277883562   0.812868363970155
   0.731038269778762   0.832202971471256
   0.749231822805388   0.846614334182013
   0.767413821651749   0.860295277951102
   0.785585068566543   0.873597834702296
   0.803746292795157   0.886654911829409
   0.821898158742258   0.899534329032479
   0.840041273057801   0.912291062207194
   0.858176190809281   0.925017167667717
   0.876303420875431   0.937723166554923
   0.894423430674050   0.950405880988823
   0.912536650318326   0.963052065270474
   0.930643476280979   0.975039000655399
   0.948744274633159   0.985203801670368
   0.966839383914801   0.993149717675836
   0.984929117684620   0.998340645805874
   1.003013766790844   0.999682924387804
   1.021093601397839   0.988854063627554
   1.039168872798815   0.970556863795850
   1.057239815040567   0.948544582698846
   1.075306646382678   0.924192669085445
   1.093369570610602   0.898189798972592
   1.111428778219442   0.870939663801397
   1.129484447483103   0.842703166749639
   1.147536745421583   0.813660610735109
   1.165585828677583   0.783942857683863
   1.183631844312223   0.753852426859687
   1.201674930528470   0.723725915223901
   1.219715217329828   0.693575819769363
   1.237752827120987   0.663406453964150
   1.255787875256304   0.633220354222768
   1.273820470541351   0.603019287719260
   1.291850715692154   0.572804611584086
   1.309878707756247   0.542577432229592
   1.327904538499180   0.512338686995327
   1.345928294759778   0.482093601159755
   1.363950058777046   0.451859141636949
   1.381969908491336   0.421639624356634
   1.399987917822112   0.391438642873715
   1.418004156924420   0.361260528592858
   1.436018692425930   0.331110647035910
   1.454031587646265   0.300995856386874
   1.472042902800139   0.270925253820589
   1.490052695185676   0.240911468795704
   1.508061019359176   0.210973093599594
   1.526067927297431   0.181139784423871
   1.544073468548636   0.151464842881405
   1.562077690372811   0.122065737188735
   1.580080637872572   0.093360568990766
   1.598082354115028   0.070425299832855
   1.616082880245493   0.054044308441212
   1.634082255593642   0.041584012728646
   1.652080517772708   0.031809457714884
   1.670077702772232   0.024023553723444
   1.688073845044852   0.017787029150803
   1.706068977587584   0.012801903819763
   1.724063132017989   0.008855026890688
   1.742056338645600   0.005787684557627
   1.760048626538951   0.003477920800777
   1.778040023588524   0.001829619214736
   1.796030556565899   0.000765431080724
   1.814020251179364   0.000222012897527
   1.832009132126250   0.000122687483257
   1.849997223142188   0.000122690606110
   1.867984547047522   0.000122693576590
   1.885971125791052   0.000122696400470
   1.903956980491287   0.000122699083249
   1.921942131475380   0.000122701630174
   1.939926598315889   0.000122704046247
   1.957910399865500   0.000122706336245
   1.975893554289859   0.000122708504726
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.644688927532753   0.000101052441635
   0.651065111023892   0.000101087559687
   0.657439150378317   0.000101121702245
   0.663811107361244   0.000101154905873
   0.670181041369082   0.000101187205434
   0.676549009542783   0.000101218634181
   0.682915066874705   0.000101249223849
   0.689279266309405   0.000101279004735
   0.695641658838780   0.000101308005779
   0.702002293591905   0.000113220659473
   0.708361217919931   0.000176473090903
   0.714718477476349   0.000295857551787
   0.721074116292908   0.000473330345656
   0.727428176851485   0.000710959055588
   0.733780700152124   0.001010931985466
   0.740131725777509   0.001375568627901
   0.746481291954081   0.001807331301019
   0.752829435609995   0.002308838119930
   0.759176192430110   0.002882877497080
   0.765521596908202   0.003532424399804
   0.771865682396540   0.004260658634601
   0.778208481152998   0.005070985477809
   0.784550024385842   0.005967059033475
   0.790890342296314   0.006952808774367
   0.797229464119162   0.008032469814843
   0.803567418161200   0.009210617579500
   0.809904231838047   0.010492207675756
   0.816239931709105   0.011882621959968
   0.822574543510909   0.013387722017015
   0.828908092188913   0.015013911567720
   0.835240601927813   0.016768209698066
   0.841572096180473   0.018658337298099
   0.847902597695539   0.020692819747089
   0.854232128543804   0.022881109742611
   0.860560710143393   0.025233735326882
   0.866888363283826   0.027762479733826
   0.873215108149023   0.030480601841903
   0.879540964339295   0.033403109036541
   0.885865950892387   0.036547098569120
   0.892190086303606   0.039932189682817
   0.898513388545093   0.043581077875048
   0.904835875084274   0.047520256346188
   0.911157562901527   0.051780970747473
   0.917478468507117   0.056400506657688
   0.923798607957420   0.061423963554501
   0.930117996870481   0.066906760829015
   0.936436650440934   0.072918282869555
   0.942754583454305   0.079547368252723
   0.949071810300756   0.086910930380736
   0.955388344988255   0.095168216556333
   0.961704201155234   0.104545998483768
   0.968019392082743   0.115246223975450
   0.974333930706126   0.127067939775660
   0.980647829626234   0.139784874338244
   0.986961101120213   0.153238102601436
   0.993273757151870   0.167310927881205
   0.999585809381641   0.181914661000671
   1.005897269176179   0.196980021620391
   1.012208147617587   0.212451662554002
   1.018518455512294   0.228284533445940
   1.024828203399603   0.244441380693598
   1.031137401559925   0.260890977646081
   1.037446060022707   0.277606840146091
   1.043754188574068   0.294566274023226
   1.050061796764158   0.311749655345617
   1.056368893914252   0.329139877471698
   1.062675489123587   0.346721919956642
   1.068981591275958   0.364482508015674
   1.075287209046073   0.382409840324922
   1.081592350905688   0.400493369109608
   1.087897025129529   0.418723620742733
   1.094201239801004   0.437092048089482
   1.100505002817715   0.455590907989166
   1.106808321896782   0.474213158833187
   1.113111204579987   0.492952374350558
   1.119413658238740   0.511802670571653
   1.125715690078873   0.530758643588073
   1.132017307145282   0.549815316219348
   1.138318516326404   0.568968092075844
   1.144619324358551   0.588212715801123
   1.150919737830094   0.607545238506657
   1.157219763185519   0.626961987592969
   1.163519406729338   0.646459540295059
   1.169818674629885   0.666034700404956
   1.176117572922979   0.685684477716833
   1.182416107515475   0.705406069814986
   1.188714284188695   0.725196845886103
   1.195012108601759   0.745054332287160
   1.201309586294804   0.764976199641477
   1.207606722692099   0.784960251269510
   1.213903523105068   0.805004412789215
   1.220199992735220   0.825106722744488
   1.226496136676978   0.845262351471315
   1.232791959920433   0.865431389734389
   1.239087467354004   0.885601786483758
   1.245382663767023   0.905773509488119
   1.251677553852237   0.925946527394990
   1.257972142208237   0.946120809703040
   1.264266433341813   0.966296326735392
   1.270560431670240   0.986473049613902
   1.276854141523491   1.006650950234341
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -1.100000000000000   0.000122058105469
  -1.078000000000000   0.000122060791016
  -1.056000000000000   0.000122063476563
  -1.034000000000000   0.000122066162109
  -1.012000000000000   0.000122068847656
  -0.990000000000000   0.000396295251607
  -0.968000000000000   0.002112180399370
  -0.946000000000000   0.004595317347952
  -0.924000000000000   0.007506284413780
  -0.902000000000000   0.010700139890683
  -0.880000000000000   0.014093445799037
  -0.858000000000000   0.017590838541393
  -0.836000000000000   0.021143051952854
  -0.814000000000000   0.024730541361328
  -0.792000000000000   0.028351634722962
  -0.770000000000000   0.032098337169462
  -0.748000000000000   0.036006284094080
  -0.726000000000000   0.040087639393475
  -0.704000000000000   0.044356177874410
  -0.682000000000000   0.048827600758169
  -0.660000000000000   0.053519935379384
  -0.638000000000000   0.058454048285515
  -0.616000000000000   0.063654313729860
  -0.594000000000000   0.069149499267872
  -0.572000000000000   0.074973961405726
  -0.550000000000000   0.081169295294819
  -0.528000000000000   0.087786668877664
  -0.506000000000000   0.094890224306719
  -0.484000000000000   0.102562211596075
  -0.462000000000000   0.110911072754440
  -0.440000000000000   0.120084858716334
  -0.418000000000000   0.130295035485371
  -0.396000000000000   0.141857769828020
  -0.374000000000000   0.154967870057703
  -0.352000000000000   0.169702720728227
  -0.330000000000000   0.186207520662645
  -0.308000000000000   0.204650476915138
  -0.286000000000000   0.225228257552242
  -0.264000000000000   0.248173227768469
  -0.242000000000000   0.273763238641358
  -0.220000000000000   0.302335163800238
  -0.198000000000000   0.334304103060830
  -0.176000000000000   0.370191454228016
  -0.154000000000000   0.410667439845578
  -0.132000000000000   0.456618382897579
  -0.110000000000000   0.509259004794259
  -0.088000000000000   0.570333166476467
  -0.066000000000000   0.642506816512914
  -0.044000000000000   0.730241413257785
  -0.022000000000000   0.842150343552352
   0.000000000000000   1.000000000000000
   0.022000000000000   1.191047147412257
   0.044000000000000   1.218913123543933
   0.066000000000000   1.225767993619052
   0.088000000000000   1.231113510738884
   0.110000000000000   1.236400000000000
   0.132000000000000   1.241680000000000
   0.154000000000000   1.246960000000000
   0.176000000000000   1.252240000000000
   0.198000000000000   1.257520000000000
   0.220000000000000   1.262800000000000
   0.242000000000000   1.268080000000000
   0.264000000000000   1.273360000000000
   0.286000000000000   1.278640000000000
   0.308000000000000   1.283920000000000
   0.330000000000000   1.289200000000000
   0.352000000000000   1.294480000000000
   0.374000000000000   1.299760000000000
   0.396000000000000   1.305040000000000
   0.418000000000000   1.310320000000000
   0.440000000000000   1.315600000000000
   0.462000000000000   1.320880000000000
   0.484000000000000   1.326160000000000
   0.506000000000000   1.331440000000000
   0.528000000000000   1.336720000000000
   0.550000000000000   1.342000000000001
   0.572000000000000   1.347280000000001
   0.594000000000000   1.352560000000000
   0.616000000000000   1.357840000000001
   0.638000000000000   1.363120000000001
   0.660000000000000   1.368400000000001
   0.682000000000000   1.373680000000001
   0.704000000000000   1.378960000000001
   0.726000000000000   1.384240000000001
   0.748000000000000   1.389520000000001
   0.770000000000000   1.394800000000001
   0.792000000000000   1.400080000000001
   0.814000000000000   1.405360000000001
   0.836000000000000   1.410640000000001
   0.858000000000000   1.415920000000001
   0.880000000000000   1.421200000000001
   0.902000000000000   1.426480000000001
   0.924000000000000   1.431760000000001
   0.946000000000000   1.437040000000001
   0.968000000000000   1.442320000000001
   0.990000000000000   1.447600000000001
   1.012000000000000   1.452880000000001
   1.034000000000000   1.458160000000001
   1.056000000000000   1.463440000000001
   1.078000000000000   1.468720000000001
   1.100000000000000   1.474000000000001
$
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1
                 0.0                 0.0
             &timeS0                 0.0
             &timeS1             &actVal
              &timeE             &actVal
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.040,0.040,0.080,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
