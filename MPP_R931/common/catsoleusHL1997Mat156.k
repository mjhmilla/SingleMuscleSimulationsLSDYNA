*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT       1.0       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.138223610046145   0.000091917085423
   0.161445203774102   0.000097860884374
   0.183487378867957   0.000102181941362
   0.204731432664124   0.000105442609612
   0.225403144991981   0.000107973467366
   0.245647049562063   0.000109982303708
   0.265561000675018   0.000111606305981
   0.285214119803327   0.000112939568699
   0.304656889181183   0.000114048644533
   0.323946210204262   0.000123406823506
   0.343260610916625   0.000172503588810
   0.362420860375602   0.000274007450511
   0.381488856131068   0.000443342193635
   0.400486516095618   0.000704632665854
   0.419434862924078   0.001100162087122
   0.438361899048083   0.001719118045181
   0.457332498762596   0.002841793973960
   0.477421676958985   0.011070612092692
   0.498365460503883   0.035779523434891
   0.519196820460917   0.073798984903258
   0.539855492434254   0.122685395308632
   0.560351708335436   0.180669371584932
   0.580718496227135   0.246418803684865
   0.601059891775758   0.318899743071000
   0.621425518190200   0.397289783695165
   0.641753817618923   0.477922625300694
   0.661954929874779   0.556214839386621
   0.682026269094932   0.631306293625107
   0.701948332988901   0.701779604786896
   0.721675508314789   0.764828584743915
   0.741032701401075   0.812868363970155
   0.759696618210775   0.832202971471256
   0.778231492985814   0.846614334182013
   0.796737514184601   0.860295277951102
   0.815223821654028   0.873597834702296
   0.833694292446179   0.886654911829409
   0.852151197221774   0.899534329032479
   0.870596444691455   0.912291062207194
   0.889032770203841   0.925017167667717
   0.907460931822583   0.937723166554923
   0.925881321699900   0.950405880988823
   0.944294056235057   0.963052065270474
   0.962684783298932   0.975039000655400
   0.981026326938309   0.985203801670368
   0.999309628967449   0.993149717675836
   1.017522305771927   0.998340645805874
   1.035638745686670   0.999682924387804
   1.053462107275659   0.988854063627554
   1.071104023943779   0.970556863795850
   1.088653622685865   0.948544582698846
   1.106143698179238   0.924192669085445
   1.123590764957120   0.898189798972592
   1.141004574627695   0.870939663801397
   1.158391484750656   0.842703166749639
   1.175755932678267   0.813660610735109
   1.193101174414631   0.783942857683863
   1.210434521950805   0.753852426859687
   1.227764085523046   0.723725915223901
   1.245090291116270   0.693575819769363
   1.262413227293622   0.663406453964150
   1.279730449887638   0.633220354222768
   1.297040841688123   0.603019287719260
   1.314344144944442   0.572804611584086
   1.331640023420302   0.542577432229592
   1.348928047292241   0.512338686995327
   1.366207779946481   0.482093601159755
   1.383478936718379   0.451859141636949
   1.400740740929529   0.421639624356634
   1.417992147434442   0.391438642873715
   1.435231779114654   0.361260528592858
   1.452457776314825   0.331110647035910
   1.469667543106819   0.300995856386874
   1.486857288370064   0.270925253820589
   1.504021113566296   0.240911468795704
   1.521148940724483   0.210973093599594
   1.538221115369142   0.181139784423871
   1.555212533758880   0.151464842881405
   1.572102576187228   0.122065737188735
   1.588871680001369   0.093360568990766
   1.605735965552212   0.070425299832855
   1.622800121358721   0.054044308441212
   1.639983390612253   0.041584012728646
   1.657247919733184   0.031809457714884
   1.674572356163809   0.024023553723444
   1.691943256248187   0.017787029150803
   1.709351510000851   0.012801903819763
   1.726790608651842   0.008855026890688
   1.744255711874160   0.005787684557627
   1.761743104553428   0.003477920800777
   1.779249859124038   0.001829619214736
   1.796773606150687   0.000765431080724
   1.814312263281844   0.000222012897527
   1.832009132126250   0.000122687483257
   1.849997223142188   0.000122690606110
   1.867984547047522   0.000122693576590
   1.885971125791052   0.000122696400470
   1.903956980491287   0.000122699083249
   1.921942131475380   0.000122701630174
   1.939926598315889   0.000122704046247
   1.957910399865500   0.000122706336245
   1.975893554289859   0.000122708504726
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.677714545247999   0.000157323466402
   0.684080427712712   0.000157370810284
   0.690444457157119   0.000157416904298
   0.696806684394665   0.000157461793101
   0.703167158384111   0.000157505519371
   0.709525926313990   0.000157548123905
   0.715883033682449   0.000157589645725
   0.722238524372788   0.000157630122164
   0.728592440724953   0.000157669588957
   0.734985971305702   0.000176203599814
   0.741483971227406   0.000274633200874
   0.748010746390423   0.000460408311184
   0.754546121816320   0.000736565327989
   0.761085403235557   0.001106313976658
   0.767627094410670   0.001573051969541
   0.774170630903650   0.002140381262622
   0.780715796385738   0.002812126130949
   0.787262529554177   0.003592353320562
   0.793810848263702   0.004485394578796
   0.800360815881013   0.005495871917837
   0.806912525055443   0.006628726030579
   0.813466089476849   0.007889248355709
   0.820021639634975   0.009283117384089
   0.826579320750671   0.010816439915314
   0.833139291984892   0.012495798117534
   0.839701726469734   0.014328303422905
   0.846266811925915   0.016321658515111
   0.852834751749723   0.018484228947730
   0.859405766521686   0.020825126290239
   0.865980095934256   0.023354305156307
   0.872558001169398   0.026082677059315
   0.879139767786509   0.029022244807978
   0.885725709211378   0.032186262163693
   0.892316170951728   0.035589424820081
   0.898911535708351   0.039248100562241
   0.905512229607605   0.043180608904681
   0.912118729857775   0.047407563867965
   0.918731574237912   0.051952298248140
   0.925351372977632   0.056841394393065
   0.931978823802221   0.062105356114404
   0.938614731234660   0.067779470513246
   0.945260031722974   0.073904929768833
   0.951915826895130   0.080530315692113
   0.958583428404397   0.087713601651725
   0.965264419720862   0.095524910970347
   0.971960743422027   0.104050413607557
   0.978674828160339   0.113397994036243
   0.985409779866690   0.123705786617097
   0.992169682033292   0.135155580233687
   0.998960092406333   0.147994990471212
   1.005788920471078   0.162576629768100
   1.012660931186344   0.179214495908441
   1.019559852964803   0.197596048569933
   1.026472829495619   0.217369391022543
   1.033396036514518   0.238287366062343
   1.040327395506842   0.260168491802104
   1.047265451150882   0.282874844947510
   1.054209133293535   0.306298687814433
   1.061157625553852   0.330353952288060
   1.068110287133574   0.354970584415499
   1.075066603483641   0.380090656129553
   1.082026153688628   0.405665612732163
   1.088988588068035   0.431654275209206
   1.095953612301757   0.458021358816111
   1.102920975877366   0.484736353664854
   1.109890463490573   0.511772664730867
   1.116861888518075   0.539106941378085
   1.123835087978564   0.566718547725929
   1.130809918584134   0.594589139301143
   1.137786253604917   0.622702321012009
   1.144763980349911   0.651043368128684
   1.151743121301109   0.679598996637866
   1.158725788963859   0.708357172694180
   1.165712587805558   0.737306953327181
   1.172703288024354   0.766438352356263
   1.179697679641652   0.795742226801901
   1.186695570213570   0.825210180088328
   1.193696782870370   0.854834479099161
   1.200701154628201   0.884607982736519
   1.207708534928360   0.914524080091123
   1.214718784367695   0.944576636688157
   1.221731773590481   0.974759947555374
   1.228747382317369   1.005068696083605
   1.235765498491271   1.035497917828661
   1.242786017523422   1.066042968547587
   1.249808841625656   1.096699495878776
   1.256833879217146   1.127463414170363
   1.263861044395728   1.158330882039111
   1.270890256465423   1.189298282305960
   1.277921439513041   1.220362204007396
   1.284954522027788   1.251519426225778
   1.291989436558657   1.282766903518531
   1.299026009948682   1.314097131262341
   1.306062777291208   1.345448068152284
   1.313099299366015   1.376800983408752
   1.320135579408037   1.408155831363673
   1.327171620596113   1.439512567561792
   1.334207426054187   1.470871148723446
   1.341242998852468   1.502231532708641
   1.348278342008568   1.533593678482387
   1.355313458488619   1.564957546081242
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -1.100000000000000   0.000122058105469
  -1.078000000000000   0.000122060791016
  -1.056000000000000   0.000122063476563
  -1.034000000000000   0.000122066162109
  -1.012000000000000   0.000122068847656
  -0.990000000000000   0.000396295251607
  -0.968000000000000   0.002112180399370
  -0.946000000000000   0.004595317347952
  -0.924000000000000   0.007506284413780
  -0.902000000000000   0.010700139890683
  -0.880000000000000   0.014093445799037
  -0.858000000000000   0.017590838541393
  -0.836000000000000   0.021143051952854
  -0.814000000000000   0.024730541361328
  -0.792000000000000   0.028351634722962
  -0.770000000000000   0.032098337169462
  -0.748000000000000   0.036006284094080
  -0.726000000000000   0.040087639393475
  -0.704000000000000   0.044356177874410
  -0.682000000000000   0.048827600758169
  -0.660000000000000   0.053519935379384
  -0.638000000000000   0.058454048285515
  -0.616000000000000   0.063654313729860
  -0.594000000000000   0.069149499267872
  -0.572000000000000   0.074973961405726
  -0.550000000000000   0.081169295294819
  -0.528000000000000   0.087786668877664
  -0.506000000000000   0.094890224306719
  -0.484000000000000   0.102562211596075
  -0.462000000000000   0.110911072754440
  -0.440000000000000   0.120084858716334
  -0.418000000000000   0.130295035485371
  -0.396000000000000   0.141857769828020
  -0.374000000000000   0.154967870057703
  -0.352000000000000   0.169702720728227
  -0.330000000000000   0.186207520662645
  -0.308000000000000   0.204650476915138
  -0.286000000000000   0.225228257552242
  -0.264000000000000   0.248173227768469
  -0.242000000000000   0.273763238641358
  -0.220000000000000   0.302335163800238
  -0.198000000000000   0.334304103060830
  -0.176000000000000   0.370191454228016
  -0.154000000000000   0.410667439845578
  -0.132000000000000   0.456618382897579
  -0.110000000000000   0.509259004794259
  -0.088000000000000   0.570333166476467
  -0.066000000000000   0.642506816512914
  -0.044000000000000   0.730241413257785
  -0.022000000000000   0.842150343552352
   0.000000000000000   1.000000000000000
   0.022000000000000   1.191047147412257
   0.044000000000000   1.218913123543933
   0.066000000000000   1.225767993619053
   0.088000000000000   1.231113510738884
   0.110000000000000   1.236400000000000
   0.132000000000000   1.241680000000000
   0.154000000000000   1.246960000000000
   0.176000000000000   1.252240000000000
   0.198000000000000   1.257520000000000
   0.220000000000000   1.262800000000000
   0.242000000000000   1.268080000000000
   0.264000000000000   1.273360000000000
   0.286000000000000   1.278640000000000
   0.308000000000000   1.283920000000000
   0.330000000000000   1.289200000000000
   0.352000000000000   1.294480000000000
   0.374000000000000   1.299760000000000
   0.396000000000000   1.305040000000000
   0.418000000000000   1.310320000000000
   0.440000000000000   1.315600000000000
   0.462000000000000   1.320880000000000
   0.484000000000000   1.326160000000000
   0.506000000000000   1.331440000000000
   0.528000000000000   1.336720000000000
   0.550000000000000   1.342000000000001
   0.572000000000000   1.347280000000001
   0.594000000000000   1.352560000000000
   0.616000000000000   1.357840000000001
   0.638000000000000   1.363120000000001
   0.660000000000000   1.368400000000001
   0.682000000000000   1.373680000000001
   0.704000000000000   1.378960000000001
   0.726000000000000   1.384240000000001
   0.748000000000000   1.389520000000001
   0.770000000000000   1.394800000000001
   0.792000000000000   1.400080000000001
   0.814000000000000   1.405360000000001
   0.836000000000000   1.410640000000001
   0.858000000000000   1.415920000000001
   0.880000000000000   1.421200000000001
   0.902000000000000   1.426480000000001
   0.924000000000000   1.431760000000001
   0.946000000000000   1.437040000000001
   0.968000000000000   1.442320000000001
   0.990000000000000   1.447600000000001
   1.012000000000000   1.452880000000001
   1.034000000000000   1.458160000000001
   1.056000000000000   1.463440000000001
   1.078000000000000   1.468720000000001
   1.100000000000000   1.474000000000001
$         
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1
                 0.0                 0.0
             &timeS0                 0.0
             &timeS1             &actVal
              &timeE             &actVal
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.040,0.040,0.080,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
