*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT       1.0       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.183505154639175   0.000122028783425
   0.201319587628866   0.000122030958038
   0.219134020618557   0.000122033132651
   0.236948453608247   0.000122035307265
   0.254762886597938   0.000122037481878
   0.272577319587629   0.000122039656492
   0.290391752577320   0.000122041831105
   0.308206185567010   0.000122044005718
   0.326020618556701   0.000122046180332
   0.343835051546392   0.000130991139702
   0.361649484536082   0.000181854224502
   0.379463917525773   0.000287178519851
   0.397278350515464   0.000462327940260
   0.415092783505155   0.000731623245707
   0.432907216494845   0.001137984957954
   0.450721649484536   0.001772319949432
   0.468536082474227   0.002921158237978
   0.486350515463917   0.011350209466081
   0.504164948453608   0.036598155319572
   0.521979381443299   0.075330838731177
   0.539793814432990   0.124998298880713
   0.557608247422680   0.183765379148657
   0.575422680412371   0.250259169124721
   0.593237113402062   0.323420765319485
   0.611051546391753   0.402413072364868
   0.628865979381443   0.483526674354894
   0.646680412371134   0.562141308358061
   0.664494845360825   0.637412360809493
   0.682309278350515   0.707932630531928
   0.700123711340206   0.770896496675080
   0.717938144329897   0.818690767687906
   0.735752577319588   0.837569668272357
   0.753567010309278   0.851512994076646
   0.771381443298969   0.864743107885221
   0.789195876288660   0.877613178086206
   0.807010309278350   0.890255620502107
   0.824824742268041   0.902737356463823
   0.842639175257732   0.915112403293041
   0.860453608247423   0.927471966869546
   0.878268041237113   0.939825486348214
   0.896082474226804   0.952168764982331
   0.913896907216495   0.964487622093997
   0.931711340206186   0.976157806085197
   0.949525773195876   0.986015332633532
   0.967340206185567   0.993664168685065
   0.985154639175258   0.998569238165023
   1.002969072164948   0.999638378185350
   1.020783505154639   0.988553758219916
   1.038597938144330   0.970023625587706
   1.056412371134021   0.947802208618836
   1.074226804123711   0.923264578198196
   1.092041237113402   0.897098589166787
   1.109855670103093   0.869706942208411
   1.127670103092783   0.841349492720125
   1.145484536082474   0.812205492272996
   1.163298969072165   0.782404775107630
   1.181113402061856   0.752248436724183
   1.198927835051546   0.722071437679488
   1.216742268041237   0.691885289299077
   1.234556701030928   0.661693405422172
   1.252371134020619   0.631497491517866
   1.270185567010309   0.601298545284272
   1.288000000000000   0.571097210195077
   1.305814432989691   0.540893929968157
   1.323628865979381   0.510689025908023
   1.341443298969072   0.480487135361877
   1.359257731958763   0.450304634010555
   1.377072164948454   0.420145320656584
   1.394886597938144   0.390012306469790
   1.412701030927835   0.359909467602404
   1.430515463917526   0.329841737681307
   1.448329896907216   0.299815562023647
   1.466144329896907   0.269839638477485
   1.483958762886598   0.239926202847959
   1.501773195876289   0.210093446453250
   1.519587628865979   0.180370592017767
   1.537402061855670   0.150810415752689
   1.555216494845361   0.121529581467918
   1.573030927835052   0.092944030160692
   1.590845360824742   0.070106375453868
   1.608659793814433   0.053796068961932
   1.626474226804124   0.041390404135847
   1.644288659793814   0.031659431869150
   1.662103092783505   0.023908841413250
   1.679917525773196   0.017701087004922
   1.697731958762887   0.012739344969834
   1.715546391752577   0.008811283733799
   1.733360824742268   0.005758795198297
   1.751175257731959   0.003460386697752
   1.768989690721649   0.001820306340620
   1.786804123711340   0.000761498965847
   1.804618556701031   0.000220862250266
   1.822432989690722   0.000122046180332
   1.840247422680412   0.000122044005718
   1.858061855670103   0.000122041831105
   1.875876288659794   0.000122039656492
   1.893690721649484   0.000122037481878
   1.911505154639175   0.000122035307265
   1.929319587628866   0.000122033132651
   1.947134020618557   0.000122030958038
   1.964948453608247   0.000122028783425
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
 -15.712513214246524   0.000119286692920
 -15.567431487365582   0.000119310351296
 -15.425499426574238   0.000119333472791
 -15.286619179653322   0.000119356074086
 -15.150696672797377   0.000119378171217
 -15.017641436533253   0.000119399779607
 -14.887366440940148   0.000119420914092
 -14.759787939611961   0.000119441588949
 -14.634825321829684   0.000119461817919
   0.668733468240962   0.000133494051139
   0.675222368926788   0.000208049755590
   0.681707605339001   0.000348758982117
   0.688193113742866   0.000557908005164
   0.694679489669355   0.000837914595306
   0.701166973267925   0.001191339070733
   0.707655720361306   0.001620896558555
   0.714145860618200   0.002129470632829
   0.720637515649810   0.002720128524018
   0.727130806183862   0.003396138127964
   0.733625855542699   0.004160987082567
   0.740122791691833   0.005018404228847
   0.746621748698874   0.005972383831973
   0.753122867958834   0.007027213009785
   0.759626299357051   0.008187502904618
   0.766132202464529   0.009458224243324
   0.772640747827877   0.010844748065860
   0.779152118403005   0.012352892572300
   0.785666511178641   0.013988977251511
   0.792184139038559   0.015759885725466
   0.798705232918570   0.017673139089301
   0.805230044325646   0.019736981973506
   0.811758848302292   0.021960484135244
   0.818291946940830   0.024353661148436
   0.824829673581128   0.026927618774499
   0.831372397864433   0.029694726954269
   0.837920531869257   0.032668831207505
   0.844474537628773   0.035865511767516
   0.851034936431873   0.039302404327444
   0.857602320455879   0.042999601310093
   0.864177367489412   0.046980159842502
   0.870760859813773   0.051270753314218
   0.877353708777091   0.055902519480938
   0.883956987312742   0.060912182838321
   0.890571973788266   0.066343568159967
   0.897200212421462   0.072249685975002
   0.903843598626249   0.078695678667557
   0.910504503150466   0.085763105726899
   0.917185959017505   0.093556397047277
   0.923891955116159   0.102212987787523
   0.930627921823352   0.111920082254582
   0.937401588934453   0.122944269814799
   0.944218030811671   0.135522916456097
   0.951063102823380   0.149419589488545
   0.957923754960790   0.164368122588396
   0.964791795157051   0.180181576150788
   0.971661986951194   0.196722689098862
   0.978530947478689   0.213887149547318
   0.985396484609685   0.231593479190895
   0.992257186171836   0.249776591502665
   0.999112158983960   0.268383513751307
   1.005960859500091   0.287370445713808
   1.012802981863261   0.306700677510586
   1.019638382717706   0.326343078424042
   1.026467122649148   0.346270976248558
   1.033291128971887   0.366461310478359
   1.040112828172133   0.386893981737067
   1.046933585415254   0.407551344572342
   1.053754201850864   0.428417806794505
   1.060575168677929   0.449479509218244
   1.067396794325593   0.470724066924170
   1.074219273867323   0.492140358184516
   1.081042729411498   0.513718350740820
   1.087867234787190   0.535448957658718
   1.094692831226075   0.557323916828130
   1.101519537637715   0.579335689533732
   1.108347357513219   0.601477374531392
   1.115176283659375   0.623742634827756
   1.122006301499542   0.646125634939978
   1.128837396033909   0.668620986858156
   1.135670241114491   0.691223703278747
   1.142505256601781   0.713929156947501
   1.149342343925519   0.736733045163583
   1.156181411437960   0.759631358665758
   1.163022373762560   0.782620354256818
   1.169865151219049   0.805696530631319
   1.176709669314216   0.828856606959904
   1.183555858289484   0.852097503855279
   1.190403652717723   0.875416326403737
   1.197252991142903   0.898810348994572
   1.204103815757189   0.922277001719746
   1.210956072110805   0.945813858149498
   1.217809708850725   0.969418624317365
   1.224664594145453   0.993085636229087
   1.231519612653041   1.016768015985545
   1.238374430012043   1.040451617136043
   1.245229048747251   1.064136413738812
   1.252083471341555   1.087822380487902
   1.258937700236807   1.111509492695156
   1.265791737834654   1.135197726272749
   1.272645586497366   1.158887057716313
   1.279499248548629   1.182577464088590
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -1.110000000000000   0.000122056884766
  -1.096800000000000   0.000122058496094
  -1.083600000000000   0.000122060107422
  -1.070400000000000   0.000122061718750
  -1.057200000000000   0.000122063330078
  -1.044000000000000   0.000122064941406
  -1.030800000000000   0.000122066552734
  -1.017600000000000   0.000122068164063
  -1.004400000000000   0.000122069775391
  -0.991200000000000   0.000339669226664
  -0.978000000000000   0.001201073085136
  -0.964800000000000   0.002437577926703
  -0.951600000000000   0.003914349742284
  -0.938400000000000   0.005562017603801
  -0.925200000000000   0.007339294487011
  -0.912000000000000   0.009219245835846
  -0.898800000000000   0.011183189807857
  -0.885600000000000   0.013216447261137
  -0.872400000000000   0.015293460672677
  -0.859200000000000   0.017398407462537
  -0.846000000000000   0.019523184390602
  -0.832800000000000   0.021662981807344
  -0.819600000000000   0.023814667717520
  -0.806400000000000   0.025976067505535
  -0.793200000000000   0.028151688049616
  -0.780000000000000   0.030375980086870
  -0.766800000000000   0.032656472043331
  -0.753600000000000   0.034995590000858
  -0.740400000000000   0.037395939784991
  -0.727200000000000   0.039860326180182
  -0.714000000000000   0.042391774869639
  -0.700800000000000   0.044993557587439
  -0.687600000000000   0.047669221077111
  -0.674400000000000   0.050422620585421
  -0.661200000000000   0.053257958790868
  -0.648000000000000   0.056179831285224
  -0.634800000000000   0.059193280009011
  -0.621600000000000   0.062303856410141
  -0.608400000000000   0.065517696579743
  -0.595200000000000   0.068841611264052
  -0.582000000000000   0.072283194518837
  -0.568800000000000   0.075850955954589
  -0.555600000000000   0.079554483152116
  -0.542400000000000   0.083404643113608
  -0.529200000000000   0.087413834867761
  -0.516000000000000   0.091596310061854
  -0.502800000000000   0.095968585339999
  -0.489600000000000   0.100549980827791
  -0.476400000000000   0.105363335326740
  -0.463200000000000   0.110435974728282
  -0.450000000000000   0.115801052690139
  -0.436800000000000   0.121499455017003
  -0.423600000000000   0.127582587710276
  -0.410400000000000   0.134116608379023
  -0.397200000000000   0.141186835075739
  -0.384000000000000   0.148815310084035
  -0.370800000000000   0.157006923852986
  -0.357600000000000   0.165790228369628
  -0.344400000000000   0.175196273123041
  -0.331200000000000   0.185258922092035
  -0.318000000000000   0.196015224416460
  -0.304800000000000   0.207505850300874
  -0.291600000000000   0.219775606755594
  -0.278400000000000   0.232874051809538
  -0.265200000000000   0.246856231198541
  -0.252000000000000   0.261783568770483
  -0.238800000000000   0.277724951727556
  -0.225600000000000   0.294758065495058
  -0.212400000000000   0.312971052202536
  -0.199200000000000   0.332464594165591
  -0.186000000000000   0.353354563583002
  -0.172800000000000   0.375775438711946
  -0.159600000000000   0.399884776298134
  -0.146400000000000   0.425869169161057
  -0.133200000000000   0.453952340239887
  -0.120000000000000   0.484406391552138
  -0.106800000000000   0.517567855435566
  -0.093600000000000   0.553861320198086
  -0.080400000000000   0.593835518804720
  -0.067200000000000   0.638221003023111
  -0.054000000000000   0.688027654426320
  -0.040800000000000   0.744721921791790
  -0.027600000000000   0.810581732328924
  -0.014400000000000   0.889511957404754
  -0.001200000000000   0.989367200993411
   0.012000000000000   1.157266308940131
   0.025200000000000   1.197722570284723
   0.038400000000000   1.214947301526917
   0.051600000000000   1.222149189426940
   0.064800000000000   1.225472931172871
   0.078000000000000   1.228695259741327
   0.091200000000000   1.231884632021613
   0.104400000000000   1.235056000000000
   0.117600000000000   1.238224000000000
   0.130800000000000   1.241392000000000
   0.144000000000000   1.244560000000000
   0.157200000000000   1.247728000000000
   0.170400000000000   1.250896000000000
   0.183600000000000   1.254064000000000
   0.196800000000000   1.257232000000000
   0.210000000000000   1.260400000000000
   1.000000000000000   1.450000000000001
$         
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1
                 0.0                 0.0
             &timeS0                 0.0
             &timeS1             &actVal
              &timeE             &actVal
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.040,0.040,0.080,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
