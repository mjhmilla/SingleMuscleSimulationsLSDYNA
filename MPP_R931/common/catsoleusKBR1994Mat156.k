*KEYWORD
*MAT_156
$#     mid        ro       sno       srm       pis       ssm       cer       dmp
         1       1.0      &sno      &srm &fceOptAT      &sno       0.0       0.0
$#     alm       sfr       svs       svr       ssp
  -2899501       1.0       -10       -12       -11              
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        10         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.138223813782472   0.000091917113026
   0.161445428541750   0.000097860905764
   0.183487625024043   0.000102181958517
   0.204731700321116   0.000105442623710
   0.225403434169187   0.000107973479166
   0.245647360241521   0.000109982313726
   0.265561332824394   0.000111606314585
   0.285214473385882   0.000112939576159
   0.304657264160204   0.000114048651054
   0.323927584225010   0.000123406829664
   0.343054499281963   0.000172503596375
   0.362060737408549   0.000274007461135
   0.380964360678953   0.000443342208910
   0.399779925811315   0.000704632687521
   0.418519309584820   0.001100162117426
   0.437192308199132   0.001719118087736
   0.455807080507853   0.002841794037347
   0.474370481135974   0.011070612315707
   0.492888314473711   0.035779524087092
   0.511365530863953   0.073798986122400
   0.529806379922219   0.122685397147646
   0.548214531635451   0.180669374044507
   0.566593172943112   0.246418806733437
   0.584945085452204   0.318899746657387
   0.603272708485231   0.397289787756726
   0.621578190617241   0.477922629740803
   0.639863432099676   0.556214844079685
   0.658130120010645   0.631306298458027
   0.676379757556029   0.701779609654792
   0.694613688633730   0.764828589542481
   0.712833118536615   0.812868368572803
   0.731039131488453   0.832202975712156
   0.749232705567252   0.846614338051779
   0.767414725461620   0.860295281463650
   0.785585993420529   0.873597837872393
   0.803747238689616   0.886654914671394
   0.821899125673779   0.899534331559949
   0.840042261023181   0.912291064432959
   0.858177199805512   0.925017169603893
   0.876304450899685   0.937723168212746
   0.894424481723664   0.950405882378709
   0.912537722390788   0.963052066402084
   0.930644569373918   0.975039001537172
   0.948745388744336   0.985203802309863
   0.966840519042098   0.993149718081167
   0.984930273826032   0.998340645985954
   1.003014943944470   0.999682924352717
   1.021094799561877   0.988854063391044
   1.039170091971554   0.970556863375941
   1.057241055220380   0.948544582114318
   1.075307907568021   0.924192668354768
   1.093370852800002   0.898189798113584
   1.111430081411498   0.870939662831087
   1.129485771676478   0.842703165684225
   1.147538090615004   0.813660609589958
   1.165587194869832   0.783942856473526
   1.183633231502138   0.753852425597591
   1.201676338714940   0.723725913922183
   1.219716646511790   0.693575818439379
   1.237754277297424   0.663406452616549
   1.255789346426241   0.633220352867541
   1.273821962703855   0.603019286365789
   1.291852228846330   0.572804610241195
   1.309880241901235   0.542577430905579
   1.327906093634156   0.512338685698005
   1.345929870883949   0.482093599896474
   1.363951655889651   0.451859140414592
   1.381971526591643   0.421639623181678
   1.399989556909417   0.391438641752257
   1.418005816998045   0.361260527530636
   1.436020373485222   0.331110646038324
   1.454033289690597   0.300995855458996
   1.472044625828903   0.270925252967179
   1.490054439198290   0.240911468021212
   1.508062784355074   0.210973092908154
   1.526069713276070   0.181139783819276
   1.544075275509491   0.151464842367036
   1.562079518315374   0.122065736767340
   1.580082486796353   0.093360568663397
   1.598084224019554   0.070425299582212
   1.616084771130305   0.054044308246127
   1.634084167458298   0.041584012576498
   1.652082450616779   0.031809457596989
   1.670079656595301   0.024023553633302
   1.688075819846518   0.017787029083271
   1.706070973367459   0.012801903770606
   1.724065148775695   0.008855026856317
   1.742058376380770   0.005787684534928
   1.760050685251231   0.003477920787000
   1.778042103277571   0.001829619207419
   1.796032657231378   0.000765431077634
   1.814022372820952   0.000222012896623
   1.832011274743632   0.000122687482753
   1.849999386735058   0.000122690605602
   1.867986731615584   0.000122693576078
   1.885973331334018   0.000122696399954
   1.903959207008876   0.000122699082729
   1.921944378967321   0.000122701629650
   1.939928866781916   0.000122704045720
   1.957912689305357   0.000122706335715
   1.975895864703294   0.000122708504192
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        11         0       1.0       1.0       0.0       0.0
$#                a1                  o1
   0.777104585643014   0.000097749031973
   0.783397949639955   0.000097768418721
   0.789690119189183   0.000097787365524
   0.795981122616752   0.000097805886051
   0.802270987355071   0.000097823993444
   0.808559739978064   0.000097841700340
   0.814847406234668   0.000097859018897
   0.821134011080770   0.000097875960813
   0.827419578709665   0.000116866875849
   0.833920437611195   0.000188082449653
   0.840356650330758   0.000313844736439
   0.846785886055094   0.000496047256304
   0.853213389433467   0.000736692902141
   0.859640655770915   0.001037903174555
   0.866068329472783   0.001401928432375
   0.872496768826552   0.001831159299524
   0.878926214562153   0.002328139392608
   0.885356853382321   0.002895579561882
   0.891788845979300   0.003536373872302
   0.898222340971855   0.004253617592584
   0.904657482598858   0.005050627510302
   0.911094415415215   0.005930964952300
   0.917533287473105   0.006898461964970
   0.923974252724879   0.007957251202025
   0.930417473042882   0.009111800183141
   0.936863120086848   0.010366950731881
   0.943311377167508   0.011727964584053
   0.949762441214686   0.013200576389975
   0.956216524940552   0.014791055631500
   0.962673859284978   0.016506279358769
   0.969134696236121   0.018353818152241
   0.975599312134129   0.020342038374367
   0.982068011589600   0.022480224651471
   0.988541132183012   0.024778727705113
   0.995019050160085   0.027249144257421
   1.001502187406539   0.029904537950637
   1.007991020082394   0.032759713324449
   1.014486089434137   0.035831559311855
   1.020988015503633   0.039139485113235
   1.027497514749266   0.042705980761857
   1.034015423042792   0.046557348967689
   1.040542726198755   0.050724676910931
   1.047080601296206   0.055245151781558
   1.053630473862598   0.060163881507313
   1.060194099069690   0.065536480195071
   1.066773680556231   0.071432851838707
   1.073372050679672   0.077942930260872
   1.079992956147630   0.085185774864944
   1.086641535816686   0.093324785861263
   1.093325136381606   0.102594071825025
   1.100045305498035   0.113126478592104
   1.106788097551222   0.124690851758441
   1.113542871024144   0.137084049716711
   1.120302925001504   0.150162051005601
   1.127063970827016   0.163818345713028
   1.133823239619035   0.177971531294924
   1.140578942179893   0.192557731248097
   1.147329932674616   0.207525725432297
   1.154075494111501   0.222833693191125
   1.160815198665375   0.238446960839178
   1.167548815096107   0.254336399062255
   1.174276246428798   0.270477254758486
   1.180997487443900   0.286848281505235
   1.187712595352318   0.303431080332402
   1.194421669377176   0.320209591786321
   1.201124832358650   0.337169698895389
   1.207822755936273   0.354298912804406
   1.214517312548564   0.371586120964916
   1.221209815653997   0.389021383307946
   1.227901079456786   0.406595765675733
   1.234591635328440   0.424301202511142
   1.241281842682223   0.442130382758169
   1.247971950799343   0.460076654350496
   1.254662135569832   0.478133943715374
   1.261352522434187   0.496296687504374
   1.268043201286223   0.514559774354603
   1.274734236470984   0.532918494935618
   1.281425673673534   0.551368498884962
   1.288117544772952   0.569905757505414
   1.294809871328087   0.588526531308646
   1.301502667121634   0.607227341657010
   1.308195940042908   0.626004945888021
   1.314889693498027   0.644856315412426
   1.321583927477067   0.663778616362452
   1.328278945799540   0.682769192436275
   1.334975252564993   0.701825549641413
   1.341672806012854   0.720945342686146
   1.348371557454576   0.740126362806356
   1.355071461108262   0.759366526846848
   1.361772473867715   0.778663867442568
   1.368474555094355   0.798016524167162
   1.375177500001219   0.817415708571451
   1.381880374467504   0.836821840737626
   1.388583041120369   0.856228983777841
   1.395285502627051   0.875637116111988
   1.401987761609413   0.895046216691409
   1.408689820644894   0.914456264983760
   1.415391682267448   0.933867240958358
   1.422093348968456   0.953279125072001
   1.428794823197615   0.972691898255259
   1.435496107363803   0.992105541899188
$
*DEFINE_CURVE
$#    lcid      sidr       sfa       sfo      offa      offo    dattyp
        12         0       1.0       1.0       0.0       0.0
$#                a1                  o1
  -1.110000000000000   0.000122056884766
  -1.096800000000000   0.000122058496094
  -1.083600000000000   0.000122060107422
  -1.070400000000000   0.000122061718750
  -1.057200000000000   0.000122063330078
  -1.044000000000000   0.000122064941406
  -1.030800000000000   0.000122066552734
  -1.017600000000000   0.000122068164063
  -1.004400000000000   0.000122069775391
  -0.991200000000000   0.000339669226664
  -0.978000000000000   0.001201073085136
  -0.964800000000000   0.002437577926703
  -0.951600000000000   0.003914349742284
  -0.938400000000000   0.005562017603801
  -0.925200000000000   0.007339294487011
  -0.912000000000000   0.009219245835846
  -0.898800000000000   0.011183189807857
  -0.885600000000000   0.013216447261137
  -0.872400000000000   0.015293460672677
  -0.859200000000000   0.017398407462537
  -0.846000000000000   0.019523184390602
  -0.832800000000000   0.021662981807344
  -0.819600000000000   0.023814667717520
  -0.806400000000000   0.025976067505535
  -0.793200000000000   0.028151688049616
  -0.780000000000000   0.030375980086870
  -0.766800000000000   0.032656472043331
  -0.753600000000000   0.034995590000858
  -0.740400000000000   0.037395939784991
  -0.727200000000000   0.039860326180182
  -0.714000000000000   0.042391774869639
  -0.700800000000000   0.044993557587439
  -0.687600000000000   0.047669221077111
  -0.674400000000000   0.050422620585421
  -0.661200000000000   0.053257958790868
  -0.648000000000000   0.056179831285224
  -0.634800000000000   0.059193280009011
  -0.621600000000000   0.062303856410141
  -0.608400000000000   0.065517696579743
  -0.595200000000000   0.068841611264052
  -0.582000000000000   0.072283194518837
  -0.568800000000000   0.075850955954589
  -0.555600000000000   0.079554483152116
  -0.542400000000000   0.083404643113608
  -0.529200000000000   0.087413834867761
  -0.516000000000000   0.091596310061854
  -0.502800000000000   0.095968585339999
  -0.489600000000000   0.100549980827791
  -0.476400000000000   0.105363335326740
  -0.463200000000000   0.110435974728282
  -0.450000000000000   0.115801052690139
  -0.436800000000000   0.121499455017003
  -0.423600000000000   0.127582587710276
  -0.410400000000000   0.134116608379023
  -0.397200000000000   0.141186835075739
  -0.384000000000000   0.148815310084035
  -0.370800000000000   0.157006923852986
  -0.357600000000000   0.165790228369628
  -0.344400000000000   0.175196273123041
  -0.331200000000000   0.185258922092035
  -0.318000000000000   0.196015224416460
  -0.304800000000000   0.207505850300874
  -0.291600000000000   0.219775606755594
  -0.278400000000000   0.232874051809538
  -0.265200000000000   0.246856231198541
  -0.252000000000000   0.261783568770483
  -0.238800000000000   0.277724951727556
  -0.225600000000000   0.294758065495058
  -0.212400000000000   0.312971052202536
  -0.199200000000000   0.332464594165591
  -0.186000000000000   0.353354563583002
  -0.172800000000000   0.375775438711946
  -0.159600000000000   0.399884776298134
  -0.146400000000000   0.425869169161057
  -0.133200000000000   0.453952340239887
  -0.120000000000000   0.484406391552138
  -0.106800000000000   0.517567855435566
  -0.093600000000000   0.553861320198086
  -0.080400000000000   0.593835518804720
  -0.067200000000000   0.638221003023111
  -0.054000000000000   0.688027654426320
  -0.040800000000000   0.744721921791790
  -0.027600000000000   0.810581732328924
  -0.014400000000000   0.889511957404754
  -0.001200000000000   0.989367200993411
   0.012000000000000   1.157266308940131
   0.025200000000000   1.197722570284723
   0.038400000000000   1.214947301526917
   0.051600000000000   1.222149189426940
   0.064800000000000   1.225472931172871
   0.078000000000000   1.228695259741327
   0.091200000000000   1.231884632021613
   0.104400000000000   1.235056000000000
   0.117600000000000   1.238224000000000
   0.130800000000000   1.241392000000000
   0.144000000000000   1.244560000000000
   0.157200000000000   1.247728000000000
   0.170400000000000   1.250896000000000
   0.183600000000000   1.254064000000000
   0.196800000000000   1.257232000000000
   0.210000000000000   1.260400000000000
$         
$--------------------------------------------------------------------------------
$ Activation dynamics code (below) comes from the OpenHBM model and specifically
$ the code of Putra et al. that is released as part of the OpenHBM project under
$ the lgpl3 license.
$  
$ Putra, I P A, Iraeus J, Thomson R, Svensson M Y, Linder A, Sato F. 2019.
$ Comparison of control strategies for the cervical muscles of an average female 
$ head-neck finite element model. Traffic Injury Prevention
$ https://doi.org/10.1080/15389588.2019.1670818
$
$--------------------------------------------------------------------------------
*DEFINE_FUNCTION_TABULATED
28000015
stimFcn
$#                a1                  o1  
                 0.0            &stimLow
          &stimTimeA            &stimLow                 
          &stimTimeS           &stimHigh
          &stimTimeE           &stimHigh
          &stimTimeB            &stimLow          
              &timeE            &stimLow
$--------------------------------------------------------------------------------
$ 6.2.1.1 activation dynamics filter
$--------------------------------------------------------------------------------
$
*DEFINE_FUNCTION
28990210,1ode Ne/Na filter
float ode28990210(float u,float tne,float tna1,float tna2, float tt)
{
float na,ne,t,tts,dt;
dt=tt-tts;
tts=tt;
ne=ne+dt*(u-ne)/tne;
t=tna1;
if(ne<na) t=tna2;
na=na+dt*(ne-na)/t;
return na;
}
$--------------------------------------------------------------------------------
$ Filtered signal (from the viva 50f model)
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
28990310
ode28990210(stimFcn(TIME),0.040,0.040,0.080,TIME)
$--------------------------------------------------------------------------------
$ 6.2.1.3 activation signal going to muscle activation
$--------------------------------------------------------------------------------
$
*DEFINE_CURVE_FUNCTION
2899501
MIN(MAX(LC28990310,0.0),1.0)   
*END
